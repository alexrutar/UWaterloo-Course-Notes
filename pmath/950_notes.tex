% header -----------------------------------------------------------------------
% Template created by texnew (author: Alex Rutar); info can be found at 'https://github.com/alexrutar/texnew'.
% version (1.13)


% doctype ----------------------------------------------------------------------
\documentclass[11pt, a4paper]{memoir}
\usepackage[utf8]{inputenc}
\usepackage[left=3cm,right=3cm,top=3cm,bottom=4cm]{geometry}
\usepackage[protrusion=true,expansion=true]{microtype}


% packages ---------------------------------------------------------------------
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{graphicx}
\usepackage{etoolbox}
\usepackage{braket}

% Set enimitem
\usepackage{enumitem}
\SetEnumitemKey{nl}{nolistsep}
\SetEnumitemKey{r}{label=(\roman*)}

% Set tikz
\usepackage{tikz, pgfplots}
\pgfplotsset{compat=1.15}
\usetikzlibrary{intersections,positioning,cd}
\usetikzlibrary{arrows,arrows.meta}
\tikzcdset{arrow style=tikz,diagrams={>=stealth}}

% Set hyperref
\usepackage[hidelinks]{hyperref}
\usepackage{xcolor}
\newcommand\myshade{85}
\colorlet{mylinkcolor}{violet}
\colorlet{mycitecolor}{orange!50!yellow}
\colorlet{myurlcolor}{green!50!blue}

\hypersetup{
  linkcolor  = mylinkcolor!\myshade!black,
  citecolor  = mycitecolor!\myshade!black,
  urlcolor   = myurlcolor!\myshade!black,
  colorlinks = true,
}


% macros -----------------------------------------------------------------------
\DeclareMathOperator{\N}{{\mathbb{N}}}
\DeclareMathOperator{\Q}{{\mathbb{Q}}}
\DeclareMathOperator{\Z}{{\mathbb{Z}}}
\DeclareMathOperator{\R}{{\mathbb{R}}}
\DeclareMathOperator{\C}{{\mathbb{C}}}
\DeclareMathOperator{\F}{{\mathbb{F}}}

% Boldface includes math
\newcommand{\mbf}[1]{{\boldmath\bfseries #1}}

% proof implications
\newcommand{\imp}[2]{($#1\Rightarrow#2$)\hspace{0.2cm}}
\newcommand{\impe}[2]{($#1\Leftrightarrow#2$)\hspace{0.2cm}}
\newcommand{\impr}{{($\Longrightarrow$)\hspace{0.2cm}}}
\newcommand{\impl}{{($\Longleftarrow$)\hspace{0.2cm}}}

% align macros
\newcommand{\agspace}{\ensuremath{\phantom{--}}}
\newcommand{\agvdots}{\ensuremath{\hspace{0.16cm}\vdots}}

% convenient brackets
\newcommand{\brac}[1]{\ensuremath{\left\langle #1 \right\rangle}}
\newcommand{\norm}[1]{\ensuremath{\left\lVert#1\right\rVert}}
\newcommand{\abs}[1]{\ensuremath{\left\lvert#1\right\rvert}}

% arrows
\newcommand{\lto}[0]{\ensuremath{\longrightarrow}}
\newcommand{\fto}[1]{\ensuremath{\xrightarrow{\scriptstyle{#1}}}}
\newcommand{\hto}[0]{\ensuremath{\hookrightarrow}}
\newcommand{\mapsfrom}[0]{\mathrel{\reflectbox{\ensuremath{\mapsto}}}}
 
% Divides, Not Divides
\renewcommand{\div}{\bigm|}
\newcommand{\ndiv}{%
    \mathrel{\mkern.5mu % small adjustment
        % superimpose \nmid to \big|
        \ooalign{\hidewidth$\big|$\hidewidth\cr$/$\cr}%
    }%
}

% Convenient overline
\newcommand{\ol}[1]{\ensuremath{\overline{#1}}}

% Big \cdot
\makeatletter
\newcommand*\bigcdot{\mathpalette\bigcdot@{.5}}
\newcommand*\bigcdot@[2]{\mathbin{\vcenter{\hbox{\scalebox{#2}{$\m@th#1\bullet$}}}}}
\makeatother

% Big and small Disjoint union
\makeatletter
\providecommand*{\cupdot}{%
  \mathbin{%
    \mathpalette\@cupdot{}%
  }%
}
\newcommand*{\@cupdot}[2]{%
  \ooalign{%
    $\m@th#1\cup$\cr
    \sbox0{$#1\cup$}%
    \dimen@=\ht0 %
    \sbox0{$\m@th#1\cdot$}%
    \advance\dimen@ by -\ht0 %
    \dimen@=.5\dimen@
    \hidewidth\raise\dimen@\box0\hidewidth
  }%
}

\providecommand*{\bigcupdot}{%
  \mathop{%
    \vphantom{\bigcup}%
    \mathpalette\@bigcupdot{}%
  }%
}
\newcommand*{\@bigcupdot}[2]{%
  \ooalign{%
    $\m@th#1\bigcup$\cr
    \sbox0{$#1\bigcup$}%
    \dimen@=\ht0 %
    \advance\dimen@ by -\dp0 %
    \sbox0{\scalebox{2}{$\m@th#1\cdot$}}%
    \advance\dimen@ by -\ht0 %
    \dimen@=.5\dimen@
    \hidewidth\raise\dimen@\box0\hidewidth
  }%
}
\makeatother


% macros (theorem) -------------------------------------------------------------
\usepackage[thmmarks,amsmath,hyperref]{ntheorem}
\usepackage[capitalise,nameinlink]{cleveref}

% Numbered Statements
\theoremstyle{change}
\theoremindent\parindent
\theorembodyfont{\itshape}
\theoremheaderfont{\bfseries\boldmath}
\newtheorem{theorem}{Theorem.}[section]
\newtheorem{lemma}[theorem]{Lemma.}
\newtheorem{corollary}[theorem]{Corollary.}
\newtheorem{proposition}[theorem]{Proposition.}

% Claim environment
\theoremstyle{plain}
\theorempreskip{0.2cm}
\theorempostskip{0.2cm}
\theoremheaderfont{\scshape}
\newtheorem{claim}{Claim}
\renewcommand\theclaim{\Roman{claim}}
\AtBeginEnvironment{theorem}{\setcounter{claim}{0}}

% Un-numbered Statements
\theorempreskip{0.1cm}
\theorempostskip{0.1cm}
\theoremindent0.0cm
\theoremstyle{nonumberplain}
\theorembodyfont{\upshape}
\theoremheaderfont{\bfseries\itshape}
\newtheorem{definition}{Definition.}
\theoremheaderfont{\itshape}
\newtheorem{example}{Example.}
\newtheorem{remark}{Remark.}

% Proof / solution environments
\theoremseparator{}
\theoremheaderfont{\hspace*{\parindent}\scshape}
\theoremsymbol{$//$}
\newtheorem{solution}{Sol'n}
\theoremsymbol{$\blacksquare$}
\theorempostskip{0.4cm}
\newtheorem{proof}{Proof}
\theoremsymbol{}
\newtheorem{nmproof}{Proof}

% Format references
\crefformat{equation}{(#2#1#3)}
\Crefformat{theorem}{#2Thm. #1#3}
\Crefformat{lemma}{#2Lem. #1#3}
\Crefformat{proposition}{#2Prop. #1#3}
\Crefformat{corollary}{#2Cor. #1#3}
\crefformat{theorem}{#2Theorem #1#3}
\crefformat{lemma}{#2Lemma #1#3}
\crefformat{proposition}{#2Proposition #1#3}
\crefformat{corollary}{#2Corollary #1#3}


% macros (algebra) -------------------------------------------------------------
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\chr}{char}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\disc}{disc}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Fix}{Fix}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\Nil}{Nil}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\Tor}{Tor}

% Lagrange symbol
\newcommand{\lgs}[2]{\ensuremath{\left(\frac{#1}{#2}\right)}}

% Quotient (larger in display mode)
\newcommand{\quot}[2]{\mathchoice{\left.\raisebox{0.14em}{$#1$}\middle/\raisebox{-0.14em}{$#2$}\right.}
                                 {\left.\raisebox{0.08em}{$#1$}\middle/\raisebox{-0.08em}{$#2$}\right.}
                                 {\left.\raisebox{0.03em}{$#1$}\middle/\raisebox{-0.03em}{$#2$}\right.}
                                 {\left.\raisebox{0em}{$#1$}\middle/\raisebox{0em}{$#2$}\right.}}


% macros (analysis) ------------------------------------------------------------
\DeclareMathOperator{\M}{{\mathcal{M}}}
\DeclareMathOperator{\B}{{\mathcal{B}}}
\DeclareMathOperator{\ps}{{\mathcal{P}}}
\DeclareMathOperator{\pr}{{\mathbb{P}}}
\DeclareMathOperator{\E}{{\mathbb{E}}}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\sgn}{sgn}

\renewcommand{\Re}{\ensuremath{\operatorname{Re}}}
\renewcommand{\Im}{\ensuremath{\operatorname{Im}}}
\renewcommand{\d}[1]{\ensuremath{\operatorname{d}\!{#1}}}


% file-specific preamble -------------------------------------------------------
\newcommand{\defname}[1]{{\textit{(#1)}:}}
\newcommand{\exname}[1]{{\textit{#1}:}}
\newcommand{\defn}[1]{{\boldmath\bfseries #1}}
% \usepackage{therefore}
\newcommand{\TODO}[1]{[\textit{\textbf{TODO: #1}}]}
\newcommand{\NOTE}[1]{[\textit{\textbf{NOTE: #1}}]}
\DeclareMathOperator*{\esssup}{ess\,sup}
\DeclareMathOperator{\ext}{ext}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\dist}{dist}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\Pol}{Pol}
\newcommand{\bdim}{\ensuremath{\dim_B}}
\newcommand{\ubdim}{\ensuremath{\overline{\dim}_B}}
\newcommand{\lbdim}{\ensuremath{\underline{\dim}_B}}
\newcommand{\cwx}{\ensuremath{\overline{\operatorname{conv}}^{w^*}\,}}
\newcommand{\idc}{\mathbf{1}}
\newcommand{\FA}{\ensuremath{\operatorname{F}\!\operatorname{A}}}
\newcommand{\cw}{\ensuremath{\overline{\operatorname{conv}}\,}}

% Tons of notation:
% \newcommand{\Lip}[1]{\ensuremath{\operatorname{Lip}_{\F}(#1)}}
\newcommand{\Lipspace}{\ensuremath{\operatorname{Lip}_{\F}(X,d)}}


\newcommand{\lp}[1]{\ensuremath{\ell^{#1}}}
\newcommand{\csn}{\ensuremath{\mathbf{c}}}
\newcommand{\csz}{\ensuremath{\mathbf{c}_0}}
\newcommand{\lpspace}[1]{\ensuremath{\ell^{#1}_{\F}}}
\newcommand{\Lp}[1]{\ensuremath{L^{#1}_{\F}}}
% \newcommand{\Lpm}{\ensuremath{L^{#1}_{\F}(X,\mathcal{M},\mu)}}
\DeclareMathOperator{\Lip}{Lip}
\newcommand{\lbr}[1]{\ensuremath{\left[#1\right]}}
\newcommand{\inr}[1]{\ensuremath{\left(#1\right)}}


% constants --------------------------------------------------------------------
\newcommand{\subject}{Fractal Geometry}
\newcommand{\semester}{Winter 2020}


% formatting -------------------------------------------------------------------
% Fonts
\usepackage{kpfonts}
\usepackage{dsfont}

% Adjust numbering
\numberwithin{equation}{section}
\counterwithin{figure}{section}
\counterwithout{section}{chapter}
\counterwithin*{chapter}{part}

% Footnote
\setfootins{0.5cm}{0.5cm} % footer space above
\renewcommand*{\thefootnote}{\fnsymbol{footnote}} % footnote symbol

% Table of Contents
\renewcommand{\thechapter}{\Roman{chapter}}
\renewcommand*{\cftchaptername}{Chapter } % Place 'Chapter' before roman
\setlength\cftchapternumwidth{4em} % Add space before chapter name
\cftpagenumbersoff{chapter} % Turn off page numbers for chapter
\maxtocdepth{subsection} % table of contents up to section

% Section / Subsection headers
\setsecnumdepth{subsection} % numbering up to and including "subsection"
\newcommand*{\shortcenter}[1]{%
    \sethangfrom{\noindent ##1}%
    \Large\boldmath\scshape\bfseries
    \centering
\parbox{5in}{\centering #1}\par}
\setsecheadstyle{\shortcenter}
\setsubsecheadstyle{\large\scshape\boldmath\bfseries\raggedright}

% Chapter Headers
\chapterstyle{verville}

% Page Headers / Footers
\copypagestyle{myruled}{ruled} % Draw formatting from existing 'ruled' style
\makeoddhead{myruled}{}{}{\scshape\subject}
\makeevenfoot{myruled}{}{\thepage}{}
\makeoddfoot{myruled}{}{\thepage}{}
\pagestyle{myruled}
\setfootins{0.5cm}{0.5cm}
\renewcommand*{\thefootnote}{\fnsymbol{footnote}}

% Titlepage
\title{\subject}
\author{Alex Rutar\thanks{\itshape arutar@uwaterloo.ca}\\ University of Waterloo}
\date{\semester\thanks{Last updated: \today}}

\begin{document}
\pagenumbering{gobble}
\hypersetup{pageanchor=false}
\maketitle
\newpage
\frontmatter
\hypersetup{pageanchor=true}
\tableofcontents*
\newpage
\mainmatter


% main document ----------------------------------------------------------------
\chapter{Topics in Fractal Geometry}
\section{Dimension Theory}
% \TODO{Move this somewhere else}
% \subsection{Prelude: Cantor Sets and Box Dimensions}
% Define maps $f_i:\R\to\R$ for $i=1,2$ given by $f_1(x)=x/3$ and $f_2(x)=x/3+2/3$.
% Let $C_0=[0,1]$; given some $C_k$, define $C_{k+1}=f_1(C_k)\cup f_2(C_k)$; since the $f_i$ are linear, $C_k$ is compact.
% We thus define $C_{1/3}=\bigcap_{n=0}^\infty C_n$, the classical \defn{Cantor set}.

% If $x\in C_{1/3}$, then $x$ is an accumulation point: given $\epsilon>0$, get $N$ so that $3^{-N}<\epsilon$ then and thus some endpoint of $C_N$ disjoint from $x$ is within distance $\epsilon$ of $x$.
% Thus $C_{1/3}$ is a perfect set and therefore uncountable.
% Another way to see that the Cantor set is uncountable is to note that $C_{1/3}$ is homeomorphic to $\{0,1\}^{\N}$ with the product topology (via ternary expansions).
% Moreover, since $\lambda(C_{1/3})\leq\lambda(C_n)=\frac{2^n}{3^n}$ for any $n\in\N$ we see that $\lambda(C_{1/3})=0$.

% More generally, we may define $C_r$ where $r\in(0,1/2)$ by the above process with the functions $f_1(x)=rx$ and $f_2(x)=rx+1-r$.
% Again, $C_r\cong\{0,1\}^{\N}$ topologically and $\lambda(C_r)=0$; but already, we see that our classical analytic perspectives (topological, Lebesgue-measure-theoretic, cardinality) are insufficient to distinguish the $C_r$ for distinct $r$.
\subsection{Constructing Measures in Metric Spaces}
\TODO{fill in proofs and transfer to measure section}
Let $X$ be a metric space.
\begin{definition}
    Given $A,B\subseteq X$, say $d(A,B)=\inf\{d(a,b):a\in A,b\in B\}$.
    Say $A,B$ have \defn{positive separation} if $d(A,B)>0$.
\end{definition}
If $A,B$ are compact and disjoint, then they have positive separation.
We say that an outer measure $\mu^*$ is a \defn{metric outer measure} if $\mu^*(A\cup B)=\mu^*(A)+\mu^*(B)$ when $A,B$ have positive separation.
\begin{example}
    The Lebesgue outer measure is a metric outer measure.
    \TODO{prove}
\end{example}
\begin{theorem}
    $\mu^*$ is a metric outer measure if and only if every Borel set is $\mu^*-$measurable (in the sense of Caratheodory).
\end{theorem}
\begin{proof}
    \TODO{prove this (homework), and find a proof of the converse? (may not be true)}
\end{proof}
Suppose $\mathcal{A}\subseteq\mathcal{B}$ are both covers of $X$ containing $\emptyset$ and $\mathcal{C}:\mathcal{B}\to[0,\infty]$ with $\mathcal{C}(\emptyset)$.
Let $\mu^*_{\mathcal{A}}$ and $\mu^*_{\mathcal{B}}$ be the corresponding extensions of $\mathcal{C}$ and $\mathcal{C}|_{\mathcal{A}}$.
Then by definition, $\mu^*_{\mathcal{B}}(E)\leq\mu^*_{\mathcal{A}}(E)$ for all $E\in\ps(X)$.

Let $X$ be a metric space, $\mathcal{A}$ cover $X$ containing $\emptyset$.
Suppose for each $x\in X$ and $\delta>0$, there exists $A\in\mathcal{A}$ such that $x\in A$ and $\diam A\leq\delta$.
Let $\mathcal{C}:\mathcal{A}\to[0,\infty]$ with $\mathcal{C}(\emptyset)=0$.
Set $\mathcal{A}_\epsilon=\{A\in\mathcal{A}:\diam(A)\leq\epsilon\}$, and define $\mu^*_\epsilon$ by extending $\mathcal{C}|_{\mathcal{A}_\epsilon}$.
In particular, as $\epsilon$ decreases, $\mu^*_\epsilon$ increases, and define
\begin{equation*}
    \mu^*(E)=\sup_\epsilon\mu_\epsilon^*(E)=\lim_{\epsilon\to 0}\mu_\epsilon^*(E)
\end{equation*}
\begin{theorem}\label{t:metout}
    As defined above, $\mu^*$ is a metric outer measure.
\end{theorem}
\begin{proof}
    \TODO{prove this, homework}
\end{proof}
\begin{example}
    The Lebesgue measure arises this way; in fact, the $\mu_\epsilon^*$ are all the same outer measure.
\end{example}

\subsection{The Subdivision Method}
\begin{definition}
    We say that a collection of subsets $\mathcal{C}$ is a \defn{semi-algebra} if it contains $\emptyset$, is closed under finite intersections, and complements are finite disoint unions of sets in $\mathcal{C}$.
    We then say that $\mu$ is a \defn{measure on a semi-algebra} if $\mu:\mathcal{C}\to[0,\infty]$ has
    \begin{enumerate}[nl,r]
        \item $\mu(\emptyset)=0$
        \item If $E_1,\ldots,E_n\in\mathcal{C}$ are disjoint and $\bigcup_{i=1}^n E_i\in\mathcal{C}$, then $\mu\left(\bigcup_{i=1}^n E_i\right)=\sum_{i=1}^n\mu(E_i)$.
        \item If $\{E_i\}_{i=1}^\infty\in\mathcal{C}$ are pairwise disjoint and $\bigcup_{i=1}^\infty E_i\in\mathcal{C}$, then $\mu\left(\bigcup_{i=1}^\infty E_i\right)\leq\sum_{i=1}^\infty\mu(E_i)$.
    \end{enumerate}
    An \defn{algebra} is a semi-algebra which is closed under finite unions and complements.
    Then a \defn{measure on an algebra} is a map $\mu$ satisfying the same above constraints.
\end{definition}
\begin{theorem}
    Let $\mu$ be a measure on a semi-algebra $\mathcal{C}$.
    Then $\mu$ has a unique extension to a measure on $\mathcal{A}=\langle\mathcal{C}\rangle$, the algebra generated by $\mathcal{C}$.
\end{theorem}
\begin{proof}
    It is easy to verify that $\mathcal{A}$ is the set of all finite unions of elements in $\mathcal{C}$.
    Thus we extend $\mu$ to $\mathcal{A}$ where if $A=\bigcupdot_{i=1}^n C_i$, set $\mu(A)=\sum_{i=1}^n\mu(C_i)$.

    \TODO{prove}
    Check: well-defined and a measure
\end{proof}
% We then appeal to Caratheodory extension theorem to get a measure $\mu$ (on a $\sigma$-algebra) that extends $\mu$ from $\mathcal{A}$.
Let $\Sigma=\{1,\ldots,k\}$ and let $\Sigma^*$ denote the set of all words on $\Sigma$.
We then associate to $\Sigma^*$ a heirarchy of subsets $\{X_\sigma:\sigma\in\Sigma^*\}$ with $X_\sigma\subseteq\R^n$.
Set $\mathcal{E}=\{X_\sigma:\sigma\in\Sigma^*\}$.
When we say heirarchy, we mean that for any $\sigma\in\Sigma^*$,
\begin{equation*}
    X_\sigma\supseteq\bigcupdot_{i=1}^kX_{\sigma i}
\end{equation*}
disjointly.
We also assume that for every infinite sequence $(i_1,i_2,\ldots)$, with $\sigma|j=(i_1,\ldots,i_j)$, $\lim_{j\to\infty}|X_{\sigma|j}|=0$ and $\lim_{j\to\infty}\mu_0(X_{\sigma|j})=0$ uniformly with respect to length.

Suppose $\mu_0:\mathcal{E}\to[0,\infty]$ is any function such that $\mu(X_\sigma)=\sum_{i=1}^k\mu(X_{\sigma i})$.
Set $E_k=\bigcup_{\omega\in\Sigma^n}X_\omega$ and $E=\bigcap_{i=k}^\infty E_k$.
Let $\mathcal{C}=\{\emptyset\}\cup\{X_\omega\cap E:\omega\in\Sigma^*\}$ and extend $\mu_0$ to a function $\mu:\mathcal{C}\to[0,\infty]$ by the rule $\mu(X_\omega\cap E)=\mu_0(X_\omega)$.
We then have the following result.
\begin{proposition}
    In the above construction, $\mathcal{C}$ is a semialgebra and $\mu$ is a measure on a semialgebra.
\end{proposition}
\begin{proof}
    Closure under finite intersections is immediate since the $X_\sigma$ are either nested are disjoint.
    Moreover,
    \begin{equation*}
        (X_\omega\cap E)^c=\bigcup_{\substack{\sigma\in\Sigma^{|\omega|}\\\sigma\neq\omega}}X_\sigma\cap E
    \end{equation*}
    is closed under complementation.

    Let's first see that $\mu$ is a measure on a semi-algebra.
    We have $\mu(\emptyset)=0$ by definition.
    Suppose $\bigcup_{i=1}^n X_{\sigma_i}=X_\tau$ for some $\tau\in\Sigma^*$.
    Clearly $\tau$ is a prefix of each $\sigma_i$.
    Let's prove by induction on $m=\max\{|\sigma_i|-|\tau|:1\leq i\leq n\}$ that the formula holds.

    If $m=0$, this is immediate since since the union is over a single element.
    Otherwise, suppose $m\in\N$ is arbitrary.
    Let $S = \{i:|\sigma_i|-|\tau|=m\}$ and partition $S$ into classes $S_1,\ldots,S_k$ where $\sigma_i$ and $\sigma_j$ are in the same class if they have the same parent.
    But then for any $S_i$ with common parent $\tau_i$, we must have $\bigcup_{i\in S_i}X_{\sigma_i}\cap E=X_{\tau_i}\cap E$ disjointly, so that $\mu(X_{\tau_i}\cap E)=\sum_{i\in S_i}\mu(X_{\sigma_i}\cap E)$ by assumption on $\mu_0$ above.
    Let $S_0=\{1,\ldots,n\}\setminus\bigcup_{i=1}^k S_i$ denote the set of remainind indices.
    Then $X_\tau=\bigcup_{i\in S_0}X_{\sigma_i}\cup\bigcup_{i=1}^k X_{\tau_i}$ where $|\sigma_i|-|\tau|<m$ by definition of $S_0$ and $|\tau_i|-|\tau|<m$ since $\tau_i$ is a parent of some $\sigma$ with $|\sigma|-|\tau|=m$.
    But then apply the induction hypothesis to get
    \begin{align*}
        \mu(X_\tau) &= \sum_{i=1}^k\mu(X_{\tau_i}+\sum_{i\in S_0}X_{\sigma_i}=\sum_{i=1}^k\sum_{j\in S_i}\mu(X_{\sigma_i})+\sum_{i\in S_0}X_{\sigma_i}= \sum_{i=1}^n \mu(X_{\sigma_i})
    \end{align*}
    as required.

    Finally, suppose $\bigcup_{i=1}^\infty X_{\sigma_i}=X_\tau$ for some $\tau\in\Sigma^*$.
    It suffices to show that $\mu(X_\tau)\leq\sum_{i=1}^\infty\mu(X_{\sigma_i})+\epsilon$ for any $\epsilon>0$.
    If $\sum_{i=1}^\infty\mu(X_{\sigma_i})=\infty$, this inequality holds trivially.
    Otherwise, there exists sume $N$ such that $\sum_{i=N+1}^\infty\mu(X_{\sigma_i})<\epsilon$.
    Then $\bigcup_{i=1}^N X_{\sigma_i}\subseteq X_\tau$.
    Let $m=\max\{|\sigma_i|\}$, and for any $\omega$ with $|\omega|=m$ and $X_\omega\subseteq X_\tau$, either $X_\omega\subseteq X_{\sigma_i}$ for some $i$ or $X_\omega$ is disjoint from each $X_{\sigma_i}$.
    Then let $\{X_{\omega_1},\ldots,X_{\omega_m}\}$ be the maximal set of such $\omega$ such that $X_{\omega}$ is disjoint from each $X_{\sigma_i}$ for all $1\leq i\leq N$.
    But now $X_\tau=\bigcup_{i=1}^N X_{\sigma_i}\cup\bigcup_{i=1}^m X_{\omega_i}$, and apply the property proven earlier to get
    \begin{equation*}
        \mu(X_\tau) \leq \sum_{i=1}^N\mu(X_{\sigma_i})\leq\sum_{i=1}^\infty\mu(X_{\sigma_i})+\epsilon
    \end{equation*}
    as required.
    Thus, $\mu$ is in fact a measure on a semi-algebra.

    Thus, $\mu$ extends to the $\sigma$-algebra $\mathcal{M}$ generated by $\mathcal{C}$.
    It remains to show that $\mathcal{M}$ contains the Borel sets in $E$.
    To do this, it suffices to show that the outer measure $\mu^*$ is in fact a metric outer measure.
    Let $F_1,F_2\subseteq E$ be arbitrary such that $\dist(F_1,F_2)\geq\delta>0$.
    We wish to show for any $\epsilon>0$ that
    \begin{equation*}
        \mu^*(F_1)+\mu^*(F_2)\leq\mu^*(F_1\cup F_2)+\epsilon.
    \end{equation*}
    Get $N$ such that whenever $|\omega|\geq N$, we have $|X_\omega|<\delta$.
    Write $E=\bigcup_{\omega\in \Sigma^N}X_\omega$.
    In particular, since $|X_\omega|<\delta$, we cannot have both $F_1\cap X_\omega\neq\emptyset$ and $F_2\cap X_\omega\neq\emptyset$.

    Let $\{X_{\sigma_i}\}_{i=1}^\infty$ be a cover for $F_1\cup F_2$ such that $\sum_{i=1}^\infty \mu(X_{\sigma_i})<\mu^*(F_1\cup F_2)+\epsilon$.
    By writing $X_{\sigma_i}=\bigcup_{\alpha\in\Sigma^N}X_{\sigma_i\alpha}$ (which does not change the value of the sum and still covers $F_1$), we may assume that $|X_{\sigma_i}|<\delta$.
    In particular, there exists a partition $\N=T_1\cup T_2$ such that for each $i\in T_1$, $X_{\sigma_i}$ intersects $F_1$ and not $F_2$, and similarly for each $i\in T_2$.
    But then $\{X_{\sigma_i}\}_{i\in T_1}$ is a cover for $F_1$, and $\{X_{\sigma_i}\}_{i\in T_2}$ is a cover for $F_2$, so
    \begin{equation*}
        \mu^*(F_1)+\mu^*(F_2)\leq\sum_{i\in T_1}\mu(X_{\sigma_i})+\sum_{i\in T_2}\mu(X_{\sigma_i})=\sum_{i=1}^\infty \mu(X_{\sigma_i})\leq\mu^*(F_1\cup F_2)+\epsilon
    \end{equation*}
    as required.
    Thus $\mu^*$ is a metric outer measure, and hence the $\sigma$-algebra contains the Borel sets.
\end{proof}
\subsection{Hausdorff Measure and Dimension}
For the remainder of this chapter, if $X$ is a metric space and $U\subseteq X$, we denote $|U|=\diam(U)$.
\begin{definition}
    A \defn{$\delta-$cover} of a set $F\subseteq X$ is any countable collection $\{U_n\}_{n=1}^\infty$ such that $\bigcup_{n=1}^\infty U_n\supseteq F$ and $|U_n|\leq\delta$.
\end{definition}
Let $\mathcal{A}=\ps(X)$, and $\mathcal{A}_\delta=\{A\subseteq X:|A|\leq\delta\}$.
For $\delta\geq 0$, put $\mathcal{C}_s(A)=|A|^s$.
Then for $s\geq 0$, $\delta>0$, and $E\subseteq $, we define
\begin{align*}
    H_\delta^s(E)&=\inf\left\{\sum_{n=1}^\infty|U_n|^s:\{U_n\}\text{ is a $\delta-$cover of }E\right\}\\
                 &= \inf\left\{\sum_{n=1}^\infty\mathcal{C}_s(U_n):\bigcup_{n=1}^\infty U_n\supseteq E,U_n\in\mathcal{A}_\delta\right\}
\end{align*}
This is the outer measure as constructed in \cref{prop:def-outer} with covering family $A_\delta$ and function $\mathcal{C}_s$.
In particular, as $\delta\to 0$, $H_\delta^s$ increases; in particular, by \cref{t:metout}, $H^s(E)=\sup_\delta H_\delta^s(E)$ is a metric outer measure.
Then apply Caratheodory (\cref{thm:carat}) to get the $s-$dimensional Hausdorff measure, which is a complete Borel measure.
\begin{example}
    \begin{enumerate}[nl,r]
        \item $H^0$ is the counting measure on any metric space.
        \item Take $X=\R$ and $s=1$.
            Then $H^1$ is the Lebesgue measure (on Borel sets).
            To see this, we have
            \begin{align*}
                \lambda(E) &= \inf\left\{\sum_{n=1}^\infty |I_n|:\bigcup_{n=1}^\infty I_n\supseteq E, |I_n|\leq\delta\right\}\\
                           &\geq H^1_\delta(E)
            \end{align*}
            for any $\delta>0$; and conversely, take any $\delta-$cover of $E$, say $\{U_n\}_{n=1}^\infty$ and set $I_n=\overline{\conv U_n}$ so $|I_n|=|U_n|\leq\delta$.
            Thus $\sum_{n=1}^\infty|U_n|=\sum_{n=1}^\infty|I_n|\geq\lambda(E)$ for any such cover, so $\lambda(E)=H_\delta^1(E)$ for any $\delta>0$.
            Thus $\lambda(E)=H^1(E)$ for any Borel set $E$.
        \item More generally, if $X=\R^n$ and $s=n$, then $\lambda=\pi_n\cdot H^n$ where $\pi_n$ is the $n-$dimensional volume of the ball of diameter 1.

            We will verify that $H^n\leq m$ where $m$ is $n-$dimensional Lebesgue measure on $\R^n$; the general result is harder and left as an exercise.
            To see this, we have
            \begin{align*}
                m(E)&=\inf\left\{\sum_{i=1}^\infty\vol(C_i):C_i\text{ cube},\bigcup_{i=1}^\infty C_i\supseteq E,\text{sides }\leq\frac{1}{\sqrt{n}}\delta\right\}\\
                    &=\inf\left\{\sum_{i=1}^\infty\left(\frac{1}{\sqrt{n}}\right)^n|C_i|^n:\{C_i\}-\delta\text{-cover of cubes of }E\right\}\\
                    &\geq c_n\inf\left\{\sum_{i=1}^\infty|c_i|^n:\text{all $\delta-$covers of }E=c_nH_\delta^n(E)\right\}
            \end{align*}
            where $c_n=(1/\sqrt{n})^n\leq 1$.
        \item If $s<t$, then $H^s(E)\geq H^t(E)$.
    \end{enumerate}
\end{example}
Suppose $s<t$.
Clearly $H^s(E)\geq H^t(E)$, but we can in fact make stronger statements.
Suppose we have some $U_i$ where $|U_i|\leq\delta$, and
\begin{equation*}
    \sum_{i=1}^\infty|U_i|^t=\sum_{i=1}^\infty|U_i|^s|U_i|^{t-s}\leq\delta^{t-s}\sum_{i=1}^\infty|U_i|^s
\end{equation*}
so that
\begin{equation*}
    H_\delta^t(E)\leq\delta^{t-s}\inf\left\{\sum_{i=1}^\infty|U_i|^s:\{U_i\}_{i=1}^\infty\text{ $\delta-$cover of }E\right\}=\delta^{t-s}H_\delta^s(E).
\end{equation*}
In particular, as $\delta\to 0$, $H_\delta^t(E)\to H^t(E)$ and $H_\delta^s(E)\to H^s(E)$ and $\delta^{t-s}\to 0$ since $s<t$.
Thus if $H^s(E)\neq\infty$, then $H^t(E)=0$ for all $t>s$.
Similarly, if $H^t(E)>0$, then $H^s(E)=\infty$ for all $s<t$.
As a result, there exists some unique number $S_0:=\dim_H(E)\geq 0$ such that for all $s<S_0$, $H^s(E)=\infty$, and for all $t>S_0$, $H^t(E)=0$.
We call this value the \defn{Hausdorff dimension} of $E$.
Note that $H^{S_0}(E)\in[0,\infty]$ and all choices are possible.
\begin{example}
    \begin{enumerate}[nl,r]
        \item Since $1=m([0,1])=H^1([0,1])$, $\dim_H[0,1]=1$
        \item $\dim_H\R=1$ but $m(\R)=H^1(\R)=\infty$.
        \item It is possible to have $S_0=1$ but $m(E)=0$.
        \item There is a Cantor-like set with Hausdorff-dimension 0.
        \item If $E$ is countable and $s>0$, $H^s_\delta(E)\leq\sum_{x\in E}|\{x\}|^s=0$.
            In particular, there exist compact countable sets, and in this case, $\dim_H C=0$ while $H^0(C)=\infty$.
    \end{enumerate}
\end{example}
Here are some basic properties of Hausdorff dimension.
\begin{proposition}[Properties of Hausdorff Dimension]
    \begin{enumerate}[nl,r]
        \item If $A\subseteq B$, then $\dim_HA\leq\dim_HB$.
        \item If $F\subseteq\R^n$, then $\dim_H F\leq n$.
        \item If $U\subset\R^n$ is open, then $\dim_H U=n$.
        \item If $F=\bigcup_{i=1}^\infty F_i$, then $\dim_H(F)=\sup_{i\in\N}\dim_H F_i$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    \begin{enumerate}[nl,r]
        \item If $H^s(B)=0$, then $H^s(A)=0$ by monotonicity of measures so $\dim_H A\leq\dim_H B$.
        \item First consider the unit cube $I^n\subset\R^n$.
            Then
            \begin{equation*}
                H^s_{\sqrt{n}\delta}(I^n)\leq\left(\frac{2}{\delta}\right)^n(\sqrt{n}\delta)^s=2^n\sqrt{n}^n\delta^{s-n}
            \end{equation*}
            so if $s>n$, then $\delta^{s-n}\to 0$ as $\delta\to 0$.
            Thus for all $s>n$, $H^s(I^n)=\lim_{\delta\to 0}H^s_{\sqrt{n}\delta}(I^n)=0$ so that $\dim_H(I^n)\leq n$.
            Moreover, $\R^n$ is the countable union of unit cubes, so that $H^s(\R^n)=0$ and $\dim_H(\R^n)\leq n$.
            Then appeal to (i).
        \item Cubes have positive Hausdorff $n-$measure.
        \item If $s>\sup\{\dim_H F_i\}$, then $H^s(F_i)=0$ for all $i$ and by subadditivity $H^s(F)=0$.
            Thus $s\geq\dim_H F$.
            By monotonicity, $\dim_H F\geq\dim_H F_j$ for all $j$.
    \end{enumerate}
\end{proof}
Suppose $X=\R^n$, $E\subseteq\R^n$, $\lambda>0$.
Set $\lambda E=\{\lambda e:e\in E\}$: then $H^s(\lambda E)=\lambda^s H^s(E)$ since there is a bijection between $\delta-$covers and $\lambda\delta-$covers.

\begin{definition}
    Let $X,Y$ be metric spaces.
    A function $f:X\to Y$ is called \defn{Lipschitz} if there exists $C$ such that $d(f(x),f(y))\leq Cd(x,y)$.
\end{definition}
Certainly if $f$ is Lipschitz, then $f$ is uniformly continuous.
Functions $f:\R\to\R$ with bounded derivative are Lipschitz by the mean value theorem.
\begin{definition}
    A function $f:X\to Y$ is \defn{Hölder continuous} with exponent $\alpha$ if there exists $c$ such that $d(f(x),f(y))\leq c d(x,y)^\alpha$.
\end{definition}
\begin{example}
    \begin{enumerate}[nl,r]
        \item If $\alpha=1$, then $f$ is Lipschitz, and if $\alpha=0$, then $f$ is bounded.
        \item If $f:\R^n\to\R^n$ and $\alpha>0$, then $f$ is constant (by considering derivatives).
            Thus the most interesting cases occur for $0<\alpha\leq 1$.
    \end{enumerate}
\end{example}
\begin{proposition}
    If $f:X\to Y$ is Hölder continuous with exponent $\alpha$.
    Then $H^{s/\alpha}(f(E))\leq cH^s(E)$ for some constant $c$.
\end{proposition}
\begin{proof}
    If $\{U_i\}$ are a $\delta$-cover of $E$, then $\{f(U_i)\}$ cover $f(E)$.
    Then $\diam f(U_i)=\sup\{d(f(x),f(y)):x,y\in U_i\}\leq c\sup\{d(x,y)^\alpha:x,y\in U_i\}=C\cdot(\diam U_i)^\alpha$.
    Thus if $\{U_i\}$ is a $\delta-$cover of $E$, then $\{f(U_i)\}$ is a $c\delta^\alpha-$cover of $f(E)$.
    Passing through the definition, we get $H^{s/\alpha}\leq c^{s/\alpha}H^s(E)$.
\end{proof}
We then have the easy corollaries
\begin{corollary}
    $\dim_H f(X)\leq\frac{1}{\alpha}\dim_H X$.
\end{corollary}
\begin{corollary}
    If $f$ is an isometry, then $H^s(f(X))=H^s(X)$.
\end{corollary}
\begin{corollary}
    If $f:X\to Y$ are bi-Lipschitz, then $\dim_H X=\dim_H Y$.
\end{corollary}
\begin{example}
    Let $C$ denote the Cantor set.
    Let's show that $\frac{1}{2}\leq H^s(C)\leq 1$ for $s=\frac{\log 2}{\log 3}$.
    In particular, this implies that $\dim_H C=\frac{\log 2}{\log 3}$.

    Let $\delta=3^{-n}$ and cover $C$ with a $\delta-$covering with generation $n$ Cantor intervals.
    Then $H_\delta^s(C)\leq \sum_{I\in C_n}|I|^s=2^n3^{-ns}=1$ by choice of $s$.
    Thus $\lim_{\delta\to 0}H_\delta^s(C)=\lim_{n\to\infty}H^s_{3^{-n}}(C)\leq 1$.

    For the lower bound, take any $\delta-$cover $\{U_i\}$ of $C$.
    Without loss of generality, we may assume that the $U_i$ are open intervals.
    Since $C$ is compact, get some finite subcover $U_1,\ldots,U_N$.
    For each $i$, get $k_i\in\N$ so that $3^{-(k_i+1)}\leq|U_i|<3^{-k_i}$; set $k=\max\{k_1,\ldots,k_N\}$.
    Since $U_i$ intersects at most $1$ interval in $C_{k_i}$, $U_i$ intersects at most $2^{k-k_i}$ intervals of $C_k$.
    Thus $2^k\leq\sum_{i=1}^N 2^{k-k_i}$ where $2^{k-k_i}=2^k3^{-sk_i}=2^k3^{-s(k_i+1)}\leq 2^k|U_i|^s3^s$.
    Thus
    \begin{equation*}
        2^k\leq\sum_{i=1}^N2^k|U_i|^s3^s
    \end{equation*}
    so $\frac{1}{2}=3^{-s}\leq \sum_{i=1}^N|U_i|^s\leq \sum_{i=1}^\infty|U_i|^s$ so $H^s_\delta(C)\geq\frac{1}{2}$ so $H^s(C)\geq\frac{1}{2}$.
\end{example}
\begin{proposition}
    Let $(X,d)$ be a metric space.
    If $\dim_H X<1$, then $X$ is totally disconnected.
\end{proposition}
\begin{proof}
    Let $x\in X$ and define $f:X\to[0,\infty)$ by $f(z)=d(z,x)$.
    Then $f$ is Lipschitz with constant 1 so $\dim_Hf(X)\leq\dim_H X<1$ so $m(f(X))=0$.
    Then if $y\neq x$, $d(y,x)=f(y)>0$ while $f(x)=0$.
    In particular, $(0,f(y))\not\subset f(X)$ so there exists $0<r<f(y)$ such that $r\notin f(X)$.
    Then $U_1=\{z\in X:f(z)<r\}$ and $U_2=\{z\in X:f(z)>r\}$ are disconnecting sets for $X$ separating $x$ and $y$.

\end{proof}
\subsection{Box Dimensions}
\begin{definition}
    Let $E\subseteq\R^n$ be a bounded Borel set, and for each $\delta>0$, let $N_\delta(E)$ be the least number of closed balls of diameter $\delta$.
    We then define the \defn{upper box dimension} of $E$
    \begin{equation*}
        \ubdim E=\limsup_{\delta\to 0}\frac{\log N_\delta(E)}{|\log\delta|}
    \end{equation*}
    and similarly $\lbdim E$ (the \defn{lower box dimension}) with a $\liminf$ in place of $\limsup$.
    If $\lbdim E=\ubdim E$, then we define the \defn{box dimension} to be this shared quantity.
\end{definition}
If $I$ is any interval, it is easy to see that $\bdim I=1$.
Note that if $N_\delta(E)\sim\delta^{-s}$, then $\bdim E=S$.
\begin{example}
    Let's show that the box dimension of $C_{1/3}$ exists, and compute it.
    Given some $\delta>0$, let $n$ be so that $3^{-n}\leq\delta<3^{-(n-1)}$.
    Certainly we can cover $C_{1/3}$ by Cantor intervals of level $n$, so that $N_\delta(C_{1/3})\leq 2^n$.
    Moreover, the endpoints of Cantor inverals of level $n-1$ are distance at least $3^{-(n-1)}>\delta$ apart.
    Thus $N_\delta(C_{1/3})$ is at least the number of endpoints of level $n-1$, i.e. $N_\delta(C_{1/3})\geq 2^n$.
    Thus $N_\delta(C_{1/3})=2^n$, so that
    \begin{equation*}
        \frac{\log 2}{\log 3}=\frac{\log 2^n}{\log 3^n}\leq\frac{\log N_\delta(C_{1/3})}{|\log\delta|}\leq\frac{\log 2^n}{\log 3^{n-1}}=\frac{n}{n-1}\cdot\frac{\log 2}{\log 3}
    \end{equation*}
    and, as $\delta\to 0$, $n\to\infty$ so that the $\bdim C_{1/3}=\frac{\log 2}{\log 3}$.

    More generally, using the same technique, we may compute $\bdim C_r=\frac{\log 2}{\log 1/r}$.
\end{example}
However, the box dimension has poor properties: for example, we may verify $\bdim\{0,1,1/2,1/3,\ldots\}=\frac{1}{2}$.
In particular, the box dimension does not have countable stability (the box dimension of any singleton is 0).
But this is very concerning from a measure theoretic perspective, since this is a countable set with larger ``dimension'' than some uncountable sets (e.g. $C_r$ for small $r$).
\begin{theorem}
    The value of the various box dimensions are equal for all following definitions of $N_\delta(E)$:
    \begin{enumerate}[nl]
        \item least number of open balls of radius $\delta$ that cover $E$
        \item least number of cubes of side length $\delta$
        \item the number of $\delta-$mesh cubes that intersect $E$: $[m_1\delta,(m_1+1)\delta]\times\cdots\times[m_n\delta,(m_n+1)\delta]$ for $(m_1,\ldots,m_n)\in\Z^n$.
        \item the largest number of disjoint closed balls of radius $\delta$ with centers in $E$.
    \end{enumerate}
\end{theorem}
\begin{proof}
    Throughout, from the logarithms in the definition, it suffices to bound $N_\delta^{(i)}(E)$ with respect to $N_\delta(E)$ up to some constant factor either with respect to $\delta$ or with respect to $N_\delta$.
    \begin{enumerate}[nl]
        \item Exercise.
        \item Exercise.
        \item In general, the diameter of a $\delta-$cube in $\R^n$ is $\sqrt{n}\delta$.
            Let $N_\delta^{(3)}(E)$ denote the number of $\delta-$mesh cubes intersecting $E$.
            Then the cubes which intersect $E$ cover $E$ and these have diameter $\sqrt{n}\delta$, so $N_{\sqrt{n}\delta}(E)\leq N_\delta^{(3)}(E)$.

            Conversely, any set with diameter at most $\delta$ is contained in at most $3^n$ $\delta-$mesh cubes.
            Thus $N_\delta^{(3)}(E)\leq 3^nN_\delta(E)$.
        \item Let $N_\delta^{(4)}$ denote the largest number of disjoint balls of radius $\delta$ centred in $E$.
            Say $B_1,\ldots,B_{N_\delta^{(4)}(F)}$ are such balls.
            If $x\in F$, then $d(x,B_i)\leq\delta$ for some $i$, else $B(x,\delta)$ would be disjoint from all $B_i$, contradicting maximality.
            Thus the balls $B^1_1,\ldots,B^1_{N_\delta^{(4)}(E)}$ cover $E$ and have diameter $4\delta$, so $N_{4\delta}(E)\leq N_\delta^{(4)}(E)$.

            Conversely, let $U_1,\ldots,U_{N_\delta(E)}$ be any collection of sets of diameter at most $\delta$ that cover $E$.
            Let $B_1,\ldots,B_m$ be any disjoint balls with radius $\delta$ and centres $x_i\in E$.
            Since the $U_j$ cover $E$, each $x_i\in U_{j(i)}$ for some $j(i)$ so $U_{j(i)}\subseteq B_i$ and $U_{j(i)}\cap B_k=\emptyset$ for $k\neq i$.
            Thus $N_\delta(E)\geq N_\delta^{(4)}(E)$.
    \end{enumerate}
\end{proof}
Note that, in the box dimension computation, it suffices to verify along a sequence of $(\delta_k)_{k=1}^\infty\to 0$ such that $\delta_{k+1}\geq c\cdot\delta_k$ for some $c>0$ (i.e. not faster than exponentially).
\begin{proposition}
    $\dim_H(E)\leq\lbdim(E)$.
\end{proposition}
\begin{proof}
    Suppose we cover $E$ by $N_\delta(E)$ sets of diameter at most $\delta$.
    Then $\inf\{\sum|U_i|^s:\{U_i\}\delta-\text{cover of }E\}\leq\delta^sN_\delta(E)$ so that $H^s_\delta(E)\leq\delta^sN_\delta(E)$.
    Suppose $s<\dim_H E$, so $H^s(E)>\lambda$ for some $\lambda>0$.
    Then $\delta^sN_\delta(E)\geq\lambda$ so that $\frac{\log N_\delta(E)}{-\log\delta}\geq s+\frac{\log\lambda}{-\log\delta}$.
    Then as $\delta\to 0$, $\liminf\frac{\log N_\delta(E)}{-\log\delta}\geq s$.
    Thus $\lbdim E\geq\dim_H E$.
\end{proof}
\begin{proposition}[Properties of Box Dimension]
    \begin{enumerate}[nl,r]
        \item $\lbdim E=\lbdim\overline{E}$ and $\ubdim E=\ubdim\overline{E}$
        \item $\dim_B E=n$ if $E$ is dense in an open set in $\R^n$.
        \item $\ubdim(E\cup F)=\max(\ubdim E,\ubdim F)$.
            However, $\lbdim E\cup\lbdim F\geq\max\{\lbdim E,\lbdim F\}$ and the inequality can hold strictly.
        \item Box dimension is Lipschitz invariant.
    \end{enumerate}
\end{proposition}
\begin{theorem}[Mass Distribution Principle]
    Let $\mu$ be a finite Borel measure on $F$ with $\mu(F)>0$.
    Suppose there exists $c>0$ and $\delta_0>0$ such that whenever $|U|\leq\delta_0$, $\mu(U)\leq c|U|^s$.
    Then $H^s(F)\geq\frac{\mu(F)}{c}>0$.
\end{theorem}
\begin{proof}
    Let $\{U_i\}$ be a $\delta$-cover of $F$ with $\delta\leq\delta_0$.
    Then $\mu(F)\leq\mu\left(\bigcup_{i=1}^\infty U_i\right)\leq\sum_{i=1}^\infty\mu(U_i)\leq c\sum_{i=1}^\infty|U_i|^s$.
    Thus $\inf\{\sum_{i=1}^\infty|U_i|^s:\{U_i\}\delta\text{-cover of }F\}\geq\frac{\mu(F)}{c}$ and let $\delta\to 0$.
\end{proof}
\begin{example}
    Let $C(r)$ denote the Cantor set with contraction ratio $r$.
    Define $\mu(I_\omega\cap C)=r^{|\omega|}$, and extend to the uniform $r$-Cantor measure.
    We now apply the mass distribution principle.
    Let $U$ be arbitrary with $r^{k+1}\leq|U|<r^k$.
    Then $U$ cannot intersect 3 level $k$ intervals (or $U$ would have diameter greater than $r^k$).
    Thus $\mu(U)=\mu(U\cap C)\leq c\mu(I_\omega)=3^s...$
    So $\dim_G(C_r)=\frac{\log 2}{|\log r|}$.
\end{example}
\begin{proposition}
    Suppose $\mu$ is a finite Borel measure on $\R^n$ and $F\subseteq\R^n$ is Borel.
    Let $0<c<\infty$.
    \begin{enumerate}[nl,r]
        \item If $\limsup_{r\to 0}\frac{\mu(B(x,r))}{r^s}\leq c$ for all $x\in F$, then $H^s(F)\geq\frac{\mu(F)}{c}$
        \item If $\liminf_{r\to 0}\frac{\mu(B(x,r))}{r^s}\geq c$ for all $x\in F$, then $\mathcal{P}^s(E)\leq\frac{2^s\mu(F)}{c}$.
        \item If $\limsup_{r\to 0}\frac{\mu(B(x,r))}{r^s}\geq c$ for all $x\in F$, then $H^s(F)\leq\frac{10^s}{c}\mu(\R^n)<\infty$.
        \item If $\liminf_{r\to 0}\frac{\mu(B(x,r))}{r^s}\leq c$ for all $x\in F$, then $\mathcal{P}^s(E)\geq\frac{10^s\mu(F)}{c}$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    \begin{enumerate}[nl,r]
        \item Fix $\epsilon>0$.
            For each $\delta>0$, let
            \begin{equation*}
                F_\delta=\{x\in X:\mu(B(x,r))\leq(c+\epsilon)r^s\text{ for all }0<r\leq\delta\}.
            \end{equation*}
            By hypothesis, $F\subseteq\bigcup_{\delta>0}F_\delta$; moreover, for $\delta_1<\delta_2$, $F_{\delta_1}\supseteq F_{\delta_2}$.

            Fix some $\delta$ and take a $\delta$-cover $\{U_i\}_{i=1}^\infty$ of $F\supseteq F_\delta$.
            If $x\in F_\delta$, since $|U_i|\leq\delta$, $\mu(B(x,|U_i|))\leq(c+\epsilon)|U_i|^s$.
            Moreover, since $U_i\subseteq B(x_i,|U_i|)$ for any $x_i\in U_i$, if $U_i\cap F_\delta\neq\emptyset$, take any $x_i\in U_i\cap F_\delta$ and $\mu(U_i)\leq\mu(B(x_i,|U_i|))\leq(c+\epsilon)|U_i|^s$.
            Thus
            \begin{align*}
                \mu(F_\delta)&\leq\sum_{i:U_i\cap F_\delta\neq\emptyset}\mu(U_i) \leq\sum_{i=1}^\infty(c+\epsilon)|U_i|^s
            \end{align*}
            so that $\mu(F_\delta)\leq (c+\epsilon)\mathcal{H}^s_\delta(F)$.
            Taking limits, we have $\mu(F)\leq(c+\epsilon)\mathcal{H}^s(F)$; but $\epsilon>0$ is arbitrary, so we are done.

        \item
            % It suffices to show that $\mathcal{P}_0^s(F)\leq\frac{2^s\mu(F)}{c}$.
            For each $\delta>0$, let
            \begin{equation*}
                F_\delta=\{x\in X:\mu(B(x,r))\geq(c-\epsilon)r^s\text{ for all }0<r\leq\delta\}.
            \end{equation*}
            By hypothesis, $F\subseteq\bigcup_{\delta >0}F_\delta$; moreover, for $\delta_1<\delta_2$, $F_{\delta_1}\supseteq F_{\delta_2}$.
            
            We first show that for any $\delta_0\leq\delta$, $\mu(F)\geq\frac{(c-\epsilon)}{2^s}\mathcal{P}_{\delta_0}^s(F_\delta)$.
            Fix a $\delta_0$-packing of $F_\delta$, say $\{B_i\}_{i=1}^\infty$ where the $B_i=B(x_i,r_i)$ are disjoint, $r_i\leq\delta_0$, and $x_i\in F_\delta$.
            % Suppose $B_i\cap F_\delta\neq\emptyset$, and get $y\in B_i\cap F_\delta$.
            % But then if $B_i$ has radius $r_i$, $B_i\subseteq B(y,2r_i)$ so $\mu(B_i)\leq\mu(B(y,2r_i))\leq(c-\epsilon)2^sr_i^s$.
            Then since the $B_i$ are disjoint, we have
            \begin{equation*}
                \mu(F)\geq\mu(F_\delta)\geq\sum_{i=1}^\infty\mu(B_i)\geq\sum_{i=1}^\infty(c-\epsilon)\frac{|B_i|^s}{2^s};
            \end{equation*}
            but this holds for any $\delta_0$-packing, so taking the supremum yields the inequality.

            In particular, we have as $\delta_0\to 0$, $\mu(F)\geq\frac{(c-\epsilon)}{2^s}\mathcal{P}_0^s(F_\delta)\geq\frac{(c-\epsilon)}{2^s}\mathcal{P}^s(F_\delta)$.
            But this holds for any $F_\delta$, and since $\mathcal{P}^s$ is indeed a measure, we have $\mu(F)\geq\frac{(c-\epsilon)}{2^s}\mathcal{P}^s(F)$ as required.
            % Fix some $\delta$ and take a finite cover $\{F_i\}_{i=1}^\infty$ of $F$ and for each $i$ a countable packing (collection of disjoint balls of radii at most $\delta$ with centres in $F$) of $F_i$, denoted $\{B^i_j\}_{j=1}^\infty$.
        \item Fix $\epsilon>0$ and $\delta>0$.
            Let $\mathcal{B}=\{B(x,r):x\in F,0<r\leq\delta,\mu(B(x,r))\geq(c-\epsilon)r^s\}$.
            By assumption, $F\subseteq\bigcup_{B\in\mathcal{B}}B$.
            Use the Vitali covering lemma, so there exists disjoint balls $B_1,B_2,\ldots\in\mathcal{B}$ such that $B_i'$ is the ball with the same centre and 5 times the radius, then $\bigcup_{i=1}^\infty B_i'\supseteq F$.
            Since $\diam B(x,r)=2r$, $|B_i'|\leq 10r\leq 10\delta$ so the $\{B_i'\}_{i=1}^\infty$ are a $10\delta$-cover of $F$.
            Thus
            \begin{align*}
                H_{10\delta}^s(F) &\leq\sum_{i=1}^\infty|B_i'|^s = \sum_{i=1}^\infty|B_i|^s5^s\\
                                  &= \sum_{i=1}^\infty(2r_i)^s5^s\\
                                  &\leq 10^s\sum_{i=1}^\infty\frac{\mu(B_i)}{c-\epsilon}\\
                                  &= \frac{10^s}{c-\epsilon}\mu\left(\bigcup_{i=1}^\infty B_i\right)\leq\frac{10^s}{c-\epsilon}\mu(\R^n)
            \end{align*}
            and taking $\delta\to 0$ and noting that $\epsilon>0$ is arbitrary, we have $H^s(F)\geq\frac{10^s\mu(\R^n)}{c}$.
        \item Let $\{F_i\}_{i=1}^\infty$ be any cover of $F$.
            Since $\mathcal{P}_0(F_i')\leq\mathcal{P}_0(F_i)$ when $F_i'\subseteq F_i$, we may assume $F_i\subseteq F$.
            It is enough to show that $\sum_{i=1}^\infty\mathcal{P}_0^s(F_i)\geq\frac{10^s}{c+\epsilon}\mu(F)$ for any fixed $\epsilon>0$.

            Let $\delta>0$ and let $\mathcal{B}=\{B(x,r):x\in F_i,0<r\leq\delta,\mu(B(x,r))\leq(c+\epsilon)r^s\}$ and let $\mathcal{C}=\{B(x,r/5):B(x,r)\in\mathcal{B}$.
            By assumption, $F_i\subseteq\bigcup_{B\in\mathcal{C}}C$.
            By the Vitali covering theorem, there exists disjoint balls $\{B_i\}_{i=1}^\infty\subset\mathcal{C}$ with $B_i=B(x_i,r_i)$, such that $\bigcup_{i=1}^\infty B(x_i,5r_i)\supseteq F_i$.
            Note that $B(x_i,5r_i)\in\mathcal{B}$, so that
            \begin{align*}
                \mu(F_i) &\leq \sum_{i=1}^\infty\mu(B(x_i,5r_i)\leq\sum_{i=1}^\infty(c+\epsilon)10^s|B_i|^s
            \end{align*}
            where the $B_i$ are disjoint with radius at most $\delta/5$ and thus $\frac{10^{-s}}{c+\epsilon}\mu(F_i)\leq \mathcal{P}_{\delta/5}^s(F_i)$.
            Then taking the limit as $\delta$ goes to zero gives $\frac{10^{-s}}{c+\epsilon}\mu(F_i)\leq \mathcal{P}_0^s(F_i)$.
            But then
            \begin{equation*}
                \frac{10^s}{c+\epsilon}\mu(F)\leq\sum_{i=1}^\infty\frac{10^s}{c+\epsilon}\mu(F_i)\leq\sum_{i=1}^\infty\mathcal{P}_0^s(F_i)
            \end{equation*}
            but as above, the $F_i$ are an arbitrary cover for $F$, and $\epsilon>0$ was arbitrary, so that $\frac{10^s}{c}\mu(F)\leq\mathcal{P}^s(F)$.
    \end{enumerate}
\end{proof}
\begin{proposition}
    Suppose $F$ is Borel and $0<H^s(F)<\infty$.
    Then there exists $c$ and a compact $E\subseteq F$ such that $H^s(E)>0$ and $H^s(B(x,r)\cap E)\leq cr^s$ for all $x\in E$ and $r>0$.
\end{proposition}
\begin{proof}
    Let
    \begin{equation*}
        F_1=\bigl\{x:\limsup_{r\to 0}\frac{H^s(F\cap B(x,r))}{r^s}>10^{s+1}\bigr\}
    \end{equation*}
    and apply (b) above with $\mu=H^s|_F$ so that
    \begin{equation*}
        H^s(F_1)\leq\frac{10^s}{10^{s+1}}\mu(\R^n)=\frac{1}{10}H^s(F).
    \end{equation*}
    In particular, $H^s(F\setminus F_1)\geq\frac{9}{10}H^s(F)>0$.
    For all $x\in F\setminus F_1$, there exists $r_0(x)$ such that for all $r\leq r_0$, then
    \begin{equation*}
        \frac{H^s(F\cap B(x,r))}{r^s}\leq 10\cdot 10^{s+1}=10^{s+2}.
    \end{equation*}
    Let
    \begin{equation*}
        E_n=\bigl\{x\in F\setminus F_1:\frac{H^s(F\cap B(x,r))}{r^s}\leq 10^{s+2}\text{ for all }r\leq\frac{1}{n}\bigr\}
    \end{equation*}
    so that $\bigcup_{n=1}^\infty E_n=F\setminus F_1$.
    By continuity of measure, $H^s(E_n)\to H^s(F\setminus F_1)>0$ so there exists $N$ such that $H^s(E_N)>0$.
    Since $H^s$ is inner regular (TODO prove), get $E\subseteq E_N$ compact such that $H^s(E)>0$.
    Then if $x\in E$, $x\in E_N$ so $H^s(E\cap B(x,r))\leq H^s(F\cap B(x,r))\leq 10^{s+2}r^s$ if $r\leq 1/N$.
    For any $r$, $H^s(E\cap B(x,r))\leq H^s(F)=C_0$.
    If $r>1/N$, then $C_0\leq C_0N^sr^s$.
    Take $c=\max\{10^{s+2},C_0N^s\}$.
\end{proof}
\begin{remark}
    The assumption $H^s(F)<\infty$ can be removed when $F$ is closed.
\end{remark}
\subsection{Potential-Theoretic Methods}
\begin{definition}
    For $s\geq 0$, the \defn{$s$-potential at $x$ due to $\mu$} is
    \begin{equation*}
        \phi_s(x)=\int_{\R^n}\frac{d\mu(y)}{\norm{x-y}^s}
    \end{equation*}
    and the \defn{$s$-energy of $\mu$}
    \begin{equation*}
        I_s(\mu)=\int_{\R^n}\phi_sd\mu=\int_{\R^n\times\R^n}\frac{d\mu(x)d\mu(y)}{\norm{x-y}^s}
    \end{equation*}
\end{definition}
\begin{example}
    \begin{enumerate}[nl,r]
        \item If $s=0$, then $\phi_0(x)=\mu(\R^n)$ and $I_0(\mu)=\mu(\R^n)^s<\infty$.
        \item If $s>0$ and $\mu=\delta_0$, then $I_s(\delta_0)=\phi_s(0)=\infty$
        \item If $n=1$ and $\mu=m|_{[0,1]}$, $s<1$.
            Then $I_s(\mu)=\int_0^1\int_0^1\frac{dxdy}{|x-y|^s}<\infty$.
    \end{enumerate}
\end{example}
\begin{theorem}
    Let $F$ be a closed set, $s>0$.
    \begin{enumerate}[nl,r]
        \item If there exists a finite, non-zero measure $\mu$ supported on $F$ such that $I_s(\mu)<\infty$, then $H^s(F)=\infty$ implies that $\dim_H F\geq s$.
        \item If $H^s(F)>0$, then there exists a finite non-zero measure $\mu$ on $F$ such that $I_t(\mu)<\infty$ for all $t<s$.
    \end{enumerate}
\end{theorem}
\begin{proof}
    \begin{enumerate}[nl,r]
        \item Suppose $I_s(\mu)<\infty$ for $\mu$ a finite measure on $F$.
            We will show that $\limsup_{r\to 0}\frac{\mu(B(x,r))}{r^s}=0$ for $\mu$ a.e. $x\in F$.
            Assuming this, then $H^s(F)\geq\frac{\mu(F\setminus N)}{\epsilon}$ for some $\mu$-null $N$, but this holds for any $\epsilon>0$, so $H^s(F)=\infty$.

            Let $F_1=\{x\in F:\limsup_{r\to 0}\frac{\mu(B(x,r))}{r^s}>0\}$.
            We want to show that $\mu(F_1)=0$.
            We first show that $\phi_s(\mu)=\infty$ on $F_1$.
            If $x\in F_1$, then there exists $\epsilon>0$ and $\{r_i\}_{i=1}^\infty$ converging to $0$ such that $(B(x,r_i))\geq\epsilon r_i^s$.
            Since $I_s(\mu)<\infty$ for some $s>0$, $\mu$ is not atomic so by downward continuity of meaure, $\mu(B(x,q))\to \mu(\{x\})=0$ as $q\to 0$.
            Thus get $q_i$ such that $\mu(B(x,q_i))<\frac{\epsilon}{2}r_i^s$.
            Let $A_i=B(x,r_i)\setminus B(x,q_i)$, so that $\mu(A_i)\geq\frac{\epsilon}{2}r_i^s$.
            Relabelling the $r_i$ if necessary, we may assume that $r_{i+1}<q_i$ so that the annuli are disjoint and nested.
            In particular,
            \begin{align*}
                \phi_s(x) &= \int_{\R^n}\frac{d\mu(y)}{\norm{x-y}^s}\\
                          &\geq\sum_{i=1}^\infty\int_{A_i}\frac{d\mu(y)}{\norm{x-y}^s}\\
                          &\geq\sum_{i=1}^\infty\frac{1}{\max_{y\in A_i}\norm{x-y}^s}\mu(A_i)\\
                          &\geq\sum_{i=1}^\infty\frac{1}{r_i^s}\mu(A_i)\geq\sum_{i=1}^\infty\frac{1}{r_i^s}\cdot\frac{\epsilon}{2}r_i^s=\infty
            \end{align*}

            But now,
            \begin{equation*}
                \infty>I_s(\mu)=\int_{\R^n}\phi_sd\mu\geq\int_{F_1}\phi_sd\mu
            \end{equation*}
            so if $\phi_s=+\infty$ on $F_1$, then $\mu(F_1)=0$.
        \item Suppose $H^s(F)>0$.
            By the previous proposition, there exists sompact $E\subseteq F$ with $0<H^s(E)<\infty$ and $H^s(E\cap B(x,r))\leq cr^s$ for all $x\in E$ and $r>0$.
            Put $\mu=H^s|_E$.
            Then $\mu(B(x,r))\leq cr^s$ for all $x\in E$.
            For $x\in E$,
            \begin{align*}
                \phi_i(x) &= \int_{\norm{x-y}\leq 1}\frac{d\mu(y)}{\norm{x-y^t}}+\int_{\norm{x-y}>1}\frac{d\mu(y)}{\norm{x-y}^t}.
            \end{align*}
            Certainly the second integral is finite independent of $x$.
            The first integral is finite since
            \begin{align*}
                \int_{\norm{x-y}\leq 1}\frac{d\mu(y)}{\norm{x-y^t}} &= \sum_{k=0}^\infty\int_{B(x,2^{-k})\setminus B(x,2^{-(k+1)})}\frac{d\mu(y)}{\norm{x-y}^t}\\
                                                                   &\leq\sum_{k=0}^\infty\frac{1}{2^{-(k+1)t}}\mu(B(x,2^{-k}))\\
                                                                   &\leq \sum_{k=0}^\infty\frac{c}{2^{-(k+1)t}}\cdot 2^{-ks}<\infty
            \end{align*}
            since $s>t$.
            Again, this bound does not depend on $x$.
            Thus $\phi_t$ is a bounded function on $E$, so that $I_t(\mu)<\infty$.
    \end{enumerate}
\end{proof}
``can't have both the measure and it's fourier transform small''

Suppose $f$ is integrable on $\R^n$ or $\mu\in M(\R^n)$ is a complex measure.
We then define the \defn{fourier transform}
\begin{align*}
    \hat{f}(z) &= \int_{\R^n}f(x)e^{-ix\cdot z}\d{m(x)}\\
    \hat{\mu}(z)=\int_{\R^n}e^{-ix\cdot z}\d{\mu(x)}
\end{align*}
If $f,g\in L^1$, then $f*g\in L^1$ by
\begin{align*}
    f*g(x) &= \int_{\R^n}f(x-y)g(y)\d{y}\\
    f*\mu(x) &= \int_{\R^n}f(x-y)\d{\mu(y)}
\end{align*}
By Fubini, $\norm{f*g}_1\leq\norm{f}_1\norm{g}_1$ and $\norm{f*\mu}\leq\norm{f}_1\norm{\mu}_{M(\R^n)}$.
One reason for doing this is that $L^1$ is not closed under pointwise multiplication.
Importantly, we have
\begin{align*}
    (f*g)^{\hat{}}(z)&=\hat{f}(z)\hat{g}(z)\\
    (f*\mu)^{\hat{}}(z) &= \hat{f}(z)\hat{\mu}(z)
\end{align*}
in other words that the fourier transform converts convolution to multiplication.

Now consider $g_s(t)=\norm{t}^{-s}$.
Then
\begin{equation*}
    \phi_s(x) = \int_{\R^n}\frac{\d{\mu(y)}}{\norm{x-y}^s}=\int_{\R^n}g_s(x-y)\d{\mu(y)}=g_s*\mu(x)
\end{equation*}
It is known that $\hat{g_s}(z)=c(n,s)\norm{z}^{s-n}$ for $0<s<n$.
In particular, $\hat{\phi_s}(z)=\hat{g_s}(z)\hat{\mu}(z)=c(n,s)\norm{z}^{s-n}\hat{\mu}(z)$.
\begin{theorem}[Parseval]
    We have
    \begin{equation*}
        \int f\cdot\overline{g}\d{x}=(2\pi)^n\int\hat{f}\cdot\overline{\hat{g}}\d{z}
    \end{equation*}
    for $f,g\in L^2$ and thus $\int|f|^2=(2\pi)^n\int|\hat{f}|^2$.
    When $g$ is ``nice'',
    \begin{equation*}
        \int g(x)\d{\mu(x)} = (2\pi)^n\int\hat{g}(z)\overline{\hat{\mu}(z)}\d{z}
    \end{equation*}
\end{theorem}
In particular (with some technicalities ...)
\begin{align*}
    I_s(\mu) &= \int\phi_s(x)\d{\mu(x)} = c_n\int\hat{\phi_s}(z)\overline{\hat{\mu}(z)}\d{z}\\
             &= c_n'\int\norm{z}^{s-n}|\hat{\mu}(z)|^2\d{z}
\end{align*}
\begin{example}
    If $|\hat{\mu}(z)|\leq C\norm{z}^{-t/z}$, then $\dim_H\supp\mu\geq t$.
\end{example}
\begin{proof}
    We have since $\hat{\mu}(z)$ is bounded that
    \begin{align*}
        I_s(\mu)&=c\int\norm{z}^{s-n}|\hat{\mu}(z)|^2\d{z}\\
                &= c\left(\int_{\norm{z}\leq 1}\norm{z}^{s-n}|\hat{\mu}(z)|^2\d{z}+ \int_{\norm{z}>1}\norm{z}^{s-n}|\hat{\mu}(z)|^2\d{z}\right)\\
                &\leq c\left(\int_{\norm{z}\leq 1}C_0\norm{z}^{s-n}\d{z} + \int_{\norm{z}\ge 1}\norm{z}^{s-n}\norm{z}^{-t}\d{z}\right)\\
                &= c\left(c_1\int_0^1 r^{s-n}r^{n-1}\d{r}+\int_1^\infty t^{s-t-1}\d{r}\right)<\infty
    \end{align*}
    as $s<t$.
    Thus $I_s(\mu)<\infty$ for any $0<s<t$, and apply the energy theorem.
\end{proof}
\subsection{Projections of Fractals}
Let $F\subset\R^2$ be a region and consider the (orthogonal) projection onto some line through the origin.
Write $\proj_\theta(f)$ to denote the projection onto the line $L_\theta$.
Note that $d(\proj_\theta(x),\proj_\theta(y))\leq d_{\R^2}(x,y)$ so $\proj_\theta$ is Lipschitz and $\dim_H\proj_\theta F\leq\min\{1,\dim_H F\}$.

If $L$ is a line segment, then for all values of $\theta$ (except for 2), then the projection has maximal dimension.
\begin{theorem}
    Let $F\subseteq\R^2$ be closed.
    \begin{enumerate}[nl,r]
        \item If $\dim_H F\leq 1$, then $\dim_H\proj_\theta F=\dim_H F$ for a.e. $\theta$.
        \item If $\dim_H F>1$, then $m(\proj_\theta F)>0$ for a.e. $\theta$.
    \end{enumerate}
\end{theorem}
\begin{proof}
    \begin{enumerate}[nl,r]
        \item Choose $0<s<\dim_H F$, so $H^s(F)>0$.
            Thus there exists some $\mu$ on $F$ such that $I_s(\mu)<\infty$.
            Write $x.\theta$ to denote the projection of $x$ onto the line $L_\theta$.
            Then define $\mu_\theta$ on $\proj_\theta F$ by
            \begin{equation*}
                \int_{-\infty}^\infty f(t)\d{\mu_\theta(t)}=\int f(x.\theta)\d{\mu(x)}
            \end{equation*}
            for all $f\in C_c(\R)$ (Radon-Markov).
            Note that $\mu_\theta(S)=\mu(\proj_\theta^{-1}(S))$.
            We will show that $\int_0^\pi I_s(\mu_\theta)\d{\theta}<\infty$, so that $I_s(\mu_\theta)<\infty$ for a.e. $\theta$ and we will be done.

            We have since $|x.\theta-y.\theta|=\norm{x-y}\cos(\theta-(x-y))$.
            \begin{align*}
                \int_0^\pi I_s(\mu_\theta)\d{\theta} &= \int_0^\pi \int_F\int_F\frac{\d{\mu(x)}\d{\mu(y)}}{|x.\theta-y.\theta|^s}\\
                                                     &= \int_0^\pi \int_F\int_F\frac{\d{\mu(x)}\d{\mu(y)}}{\norm{x-y}^s|\cos(\theta-(x-y))|^s}\\
                                                     &= \int_F\int_F\left(\int_0^\pi\frac{\d{\theta}}{|\cos(\theta-(x-y))|^s}\right)\frac{\d{\mu(x)}\d{\mu(y)}}{\norm{x-y}^s}\\
                                                     &= \int_{F\times F}\left(\int_0^\pi\frac{\d{\theta}}{|\cos\theta|^s}\right)\frac{\d{\mu(x)}\d{\mu(y)}}{\norm{x-y}^s}
            \end{align*}
            Note that $\int_0^\pi\frac{\d{\theta}}{|\cos\theta|^s}<\infty$, but the remaining term is just the $s-$energy of $\mu$, which is finite.
        \item Assume $\dim_H F>1$, so there exists some $t>1$ such that $H^t(F)>0$.
            Get $\mu$ on $F$ such that $I_1(\mu)<\infty$.
            Define $\mu_\theta$ as above.
            We will show that $\mu_\theta$ is absolutely continuous with density in $L^2$ for almost every $\theta$.
            Then $f_\theta\neq 0$ in $L^2$ since $\mu_\theta\neq 0$ so that $m\{x:f_\theta(x)\neq 0\}>0$ where $\{x:f_\theta(x)\neq 0\}\subseteq\supp\mu_\theta$.

            Recall that $f\in L^2$ if and only if $\hat{f}\in L^2$.
            We have
            \begin{align*}
                |\hat{\mu_\theta}(z)|^2 &= \int e^{-ivz}\d{\mu_\theta}(v)\overline{\int e^{-izw}\d{\mu_\theta(w)}}\\
                                        &= \int_{\R\times\R}e^{-iz(v-w)}\d{\mu_\theta(v)}\d{\mu_\theta(w)}\\
                                        &= \int_{F\times F}e^{-iz(x-y).\theta}\d{\mu(x)}\d{\mu(y)}
            \end{align*}
            so that
            \begin{align*}
                |\hat{\mu_\theta}(z)|^2+|\hat{\mu_{\theta+\pi}}(z)|^2&= \int_{F\times F}\left(e^{-iz(x-y).\theta}+e^{-iz(x-y).(-\theta)}\right)\d{\mu(x)}\d{\mu(y)}\\
                                                                     &= 2\int_{F\times F}\cos(z(x-y).\theta)\d{\mu(x)}\d{\mu(y)}
            \end{align*}
            First note that
            \begin{align*}
                \int_0^{2\pi}|\hat{\mu_\theta}(z)|^2\d{\theta} &= \int_0^\pi|\hat{\mu_\theta}(z)|^2+|\hat{\mu_{\theta+\pi}}(z)|^2\d{\theta}\\
                                                               &= 2\int_0^\pi\int_f\int_F\cos(z(x-y).\theta)\d{\mu(x)}\d{\mu(y)}\d{\theta}\\
                                                               &= 2\int_0^\pi\int_f\int_F\cos\bigl(z\norm{x-y}\cos(\theta-(x-y))\bigr)\d{\mu(x)}\d{\mu(y)}\d{\theta}\\
                                                               &= \int_F\int_F\left(\int_0^{2\pi}\cos\bigl(z\norm{x-y}\cos(\theta)\bigr)\d{\theta}\right)\d{\mu(x)}\d{\mu(y)}\\
                                                               &= 2\pi\int_F\int_F J_0(z\norm{x-y})\d{\mu(x)}\d{\mu(y)}.
            \end{align*}
            We now have (concealing some technicalities in verifying the application of Fubini)
            \begin{align*}
                \int_0^{2\pi}\int_{-\infty}^\infty|\hat{\mu_\theta}(z)|^2\d{z}\d{\theta}<\infty &= \int_{-\infty}^\infty\int_0^{2\pi}|\hat{\mu_\theta}(z)|^2\d{z}\d{\theta}<\infty\\
                                                                                                &= 2\pi\int_{-\infty}^\infty\int_{F}\int_FJ_0(z\norm{x-y})\d{\mu(x)}\d{\mu(y)}\\
                                                                                                &= 2\pi\int_F\int_F\left(\int_{-\infty}^\infty J_0(z\norm{x-y})\d{z}\right)\d{\mu(x)}\d{\mu(y)}\\
                                                                                                &= 2\pi\int_F\int_F\left(\int_{-\infty}^\infty J_0(w)\d{w}\right)\frac{\d{\mu(x)}\d{\mu(y)}}{\norm{x-y}}<\infty
            \end{align*}
            by the integral of the Bessel function and the fact that $I_1(\mu)<\infty$.
    \end{enumerate}
\end{proof}
Bessel function: $J_0(\mu)=\frac{1}{2\pi}\int_0^{2\pi}\cos(u\cos\theta)\d{\theta}$.
\section{Iterated Function Systems}
\subsection{Invariant Sets and Measures}
Let $X$ be a complete metric space and $F_1,\ldots,F_m$ a family of contractions from $X$ to $X$ (i.e. functions with $0<r_i<1$ with $d(F_i(x),F_i(y))\leq r_id(x,y)$).
Then there exists $E\subseteq X$ with $E$ compact such that $E=\bigcup_{i=1}^n F_i(E)$.

Let $\mathcal{K}(X)$ denote the set of non-empty compact subsets of $X$.
For $A\subseteq X$, let $A_r=\{y\in X:d(a,y)<r\text{ for some }a\in A\}$.
We then define the \defn{Hausdorff metric} on $\mathcal{K}(X)$ as follows:
\begin{equation*}
    D(A,B)=\inf\{r>0:A\subseteq B_r,B\subseteq A_r\}
\end{equation*}
\begin{proposition}
    $D$, as defined above, is in fact a metric and when $X$ is complete, $\mathcal{K}(X)$ is also complete.
\end{proposition}
\begin{proof}
    We verify the properties for $D$ to be a metric:
    \begin{enumerate}[nl,r]
        \item Suppose $D(A,B)=0$.
            Then get a sequence $a_n$ in $A$ converging to any $b\in B$, i.e. $b\in\overline{A}=A$ and $B\subseteq A$.
            Similarly, $B\subseteq A$.
        \item $D(A,B)=D(B,A)$ is clear
        \item Fix $A,B,C\in\mathcal{K}(X)$, $d_1=D(A,C)$, $d_2=D(C,B)$.
            Fix $\epsilon>0$ and let $a\in A$ be arbitrary.
            Get $c\in C$ so that $D(a,c)<d_1+\epsilon/2$.
            Then get $b\in B$ so that $D(c,b)<d_2+\epsilon/2$.
            Thus $d(a,b)<d_1+d_2+\epsilon$ so $A\subseteq B_{d_1+d_2+\epsilon}$ for all $\epsilon>0$.
            Similarly, $B\subseteq A_{d_1+d_2+\epsilon}$.
            Thus $D(A,B)\leq d_1+d_2$.
    \end{enumerate}
    Completeness is left as an exercise.
\end{proof}
\begin{theorem}
    Let $\{F_1,\ldots,F_m\}$ be an IFS on $X$.
    Then there exists a unique compact set $E\subseteq X$ such that $E=\bigcup_{i=1}^m F_i(E)$.
\end{theorem}
\begin{proof}
    Define $F:\mathcal{K}(X)\to\mathcal{K}(X)$ by $F(A)=\bigcup_{i=1}^m F_i(A)$.
    Let $r=\max\{r_1,\ldots,r_m\}<1$.
    We will show that $D(F(A),F(B))\leq r D(A,B)$.
    Set $d=D(A,B)$;  it suffices to show that $F_i(A)\subseteq(F_i(B))_{r(d+\epsilon)}$ for any $\epsilon>0$.
    Indeed, take $a\in A$, so there exists $b\in B$ so that $d(a,b)\leq d+\epsilon$.
    Then $d(F_i(a),F_i(b))\leq r(d+\epsilon)$.

    Then $F$ is a contraction map on $\mathcal{K}(X)$, so that $F^{(k)}(A)\to E$ for some unique $E$.
\end{proof}
If $F_i(A)\subseteq A$, then $E=\bigcap_{k=0}^\infty F^{(k)}(A)$.
\begin{lemma}
    If $(A_k)_{k=1}^\infty\subset\mathcal{K}(X)$ with $A_1\supseteq A_2\supseteq\cdots$, then $A_k\to\bigcap_{i=1}^\infty A_i$.
\end{lemma}
\begin{proof}
    Let $A_0=\bigcap_{k=1}^\infty A_k$.
    We want to prove that $D(A_{k_1},A_0)\to 0$.
    Certainly $A_0\subseteq A_k$.
    Conversely, we must check that for any $r>0$, there exists $n_r$ such that $A_k\subseteq (A_0)_r$.
    Note that $(A_0)_r$ is an open set.
    Then $\{(A_0)_r,A_n^c:n\in\N\}$ is an open cover for $A_1$.
    Hence there exists a finite subcover $(A_0)_r,A_{n_1}^c,\ldots,A_{n_N}^c$.
    Thus for any $k>\max\{n_1,\ldots,n_N\}$, $A_k\subseteq (A_0)_r$, as required.
\end{proof}
\begin{theorem}
    Let $X\subseteq\R^n$ be compact and let $\{F_i\}_{i=1}^m$ be an IFS on $X$ with attractor $E$.
    Assume we are given probabilities $\{p_i\}_{i=1}^m$ such that $\sum_{i=1}^mp_i=1$.
    Then there exists a unique Borel probability measure $\mu$ such that
    \begin{equation*}
        \mu(A)=\sum_{i=1}^m p_i\mu(F_i^{-1}(A))
    \end{equation*}
    for all Borel sets $A$.
    Moreover,
    \begin{enumerate}[nl,r]
        \item $\int g\d{\mu}=\sum_{i=1}^m p_i\int g(F_i(x))\d{\mu(x)}$
        \item $\supp(\mu)=E$
        \item If the IFS satisfies the strong separation condition, then $\mu(E_\sigma)=p_\sigma$.
    \end{enumerate}
\end{theorem}
\begin{remark}
    In the case of an IFS of similarities, $\mu$ is called a \defn{self-similar measure}.
\end{remark}
\begin{proof}
    Let $M_1(X)$ denote the set of all Borel probability measures on $X$.
    Define a metric on $M(X)$ by
    \begin{equation*}
        d(\mu,\nu)=\sup\left\{\left|\int g\d{\mu}-\int g\d{\nu}\right|:|g(x)-g(y)|\leq\norm{x-y}\right\}.
    \end{equation*}
    Step 1: verify that this in fact a metric which makes $M(X)$ a complete metric space.
    \TODO{Falconer Techniques Proposition 1.9}

    Step 2: Define $H:M(X)\to M(X)$ where $H(\nu)=H_\nu$ is the measure that satisfies
    \begin{equation*}
        H_\nu(A)=\sum_{i=1}^m p_i\nu(F_i^{-1}(A))
    \end{equation*}
    for all $A$ Borel.
    Verify that $H_\nu$ is a Borel probability measure.
    We have
    \begin{align*}
        H_\nu(A) &= \int\idc{A}\d{H_\nu} = \sum_{i=1}^m p_i\int\idc{F_i^{-1}(A)}\d{\nu}\\
                 &= \sum_{i=1}^m p_i\int\idc{A}(F_i(x))\d{\nu(x)}
    \end{align*}
    and extending by density of simple functions in $L^1$, we have
    \begin{equation*}
        \int g\d{H_\nu}=\sum_{i=1}^m p_i\int g(F_i(x))\d{\nu(x)}
    \end{equation*}

    Step 3: Check that $H_\nu$ is a contraction.
    We have
    \begin{align*}
        d(H_\mu,H_\nu) &= \sup\left\{\left|\int_g\d{H_\mu}-\int_G\d{H_\nu}\right|:\Lip(g)\leq 1\right\}\\
                       &= \sup_{\Lip(g)\leq 1}\left|\sum_{i=1}^m\left(\int g(F_i(x))\d{\mu(x)}-\int g(F_i(x))\d{\nu(x)}\right)\right|\\
                       &\leq \sup_{\Lip(g)\leq 1}\left|\sum_{i=1}^m p_ir_i\left|\int r_i^{-1}g(F_i(x))\d{(\mu-\nu)(x)}\right|
    \end{align*}
    where $r_i$ is the contraction factor of $F_i$.
    Moreover, notice that
    \begin{align*}
        \left|r_i^{-1}g(F_i(x))-r_i^{-1}g(F_i(y))\right| &\leq r_i^{-1}\norm{F_i(x)-F_i(y)}\\
                                                         &\leq \norm{x-y}
    \end{align*}
    so that $r_i^{-1}g\circ F_i$ is Lipschitz with constant at most 1.
    Thus
    \begin{align*}
        d(\mu,\nu)\geq\left|\int r_i^{-1}g\circ F_i\d{(\mu-\nu)(x)}\right|
    \end{align*}
    so that
    \begin{align*}
        d(H_\mu,H_\nu)\leq \sum_{i=1}^m p_ir_i d(\mu,\nu)\leq\max\{r_i:i=1,\ldots,m\}d(\mu,\nu)
    \end{align*}
    and thus $H$ is in fact a contraction map.

    Step 4: By the Banach contraction mapping principle, there exists a unique fixed point $\mu\in M_1(X)$.
    But then
    \begin{equation*}
        \mu(A) = H(\mu)(A)=\sum_{i=1}^m p_i\mu(F_i^{-1}(A))
    \end{equation*}
    for any Borel $A$.

    It remains to show the properties.
    \begin{enumerate}[nl,r]
        \item Set $S=\supp(\mu)$.
            Then $1=\mu(S)=\sum_{i=1}^m p_i\mu(F_i^{-1}(S))$ which forces $\mu(F_i^{-1}(S))=1$.
            Thus $F_i^{-1}(S)\supseteq S$ since they are of full measure, so $S\supseteq F_i(S)$.
            If $\mu(A)>0$, then $\sum_{i=1}^m p_i\mu(F_i^{-1}(A))>0$, so there exists $i$ such that $F_i^{-1}(A)\cap S\neq\emptyset$.
            Thus $A\cap F_i(S)\neq\emptyset$.
            But $S\setminus\left(\bigcup_{i=1}^m F_i(S)\right)\cap F_j(S)=\emptyset$ for all $j$, so that $\mu(S\setminus\bigcup_{i=1}^m F_i(S))=0$ and thus $\mu(S)=1$.
            Thus $S=\bigcup_{i=1}^m F_i(S)$ so that $S=E$.
        \item Assume the SSC.
            Then
            \begin{align*}
                \mu(E_\sigma) &=\sum_{i=1}^mp_i\mu(F_i^{-1}(E_\sigma))\\
                              &\geq p_{\sigma_1}\mu(E_{\sigma_2\ldots \sigma_k})\\
                              &= p_{\sigma_1}\left(\sum_{i=1}^m p_i\mu(F_i^{-1}(E_{\sigma_2\ldots\sigma_k}))\\
                              &\geq\cdots\geq p_\sigma
            \end{align*}
            On the other hand, since $E=\bigcup_{\sigma\in\Sigma^k}E_\sigma$ disjointly,
            \begin{align*}
                1 &= \mu(E) = \sum_{\sigma\in\Sigma^k}\mu(E_\sigma)\\
                  &\geq\sum_{\sigma\in\Sigma^k}p_\sigma = \left(\sum_{i=1}^m p_i\right)^k=1
            \end{align*}
    \end{enumerate}
\end{proof}
\begin{definition}
    If the attractor $E$ of an IFS $\{F_1,\ldots,F_m\}$ has the property that the sets $F_i(E)$ are disjoint, we say $E$ satisfies the \defn{strong separation condition}.
    We say that the IFS satisfies the \defn{open set condition} if there exists a non-empty bounded open $V$ such that $\bigcupdot_{i=1}^m F_i(U)\subseteq U$.
\end{definition}
The strong separation condition implies the open set condition by taking, say, $U=\{x:d(x,E)<\epsilon\}$ where $\epsilon=\frac{1}{2}\min_{i\neq j}(d(F_i(E),F_j(E)))>0$.
\subsection{Dimensional Properties of the Attractor}
\begin{theorem}
    Let $F$ be the attractor of the IFS $\{F_i\}_{i=1}^m$ with contraction factors $\{r_1,\ldots,r_m\}$.
    If the IFS satisfies the SSC, then $\dim_HE=s$ where $\sum_{i=1}^m r_i^s=1$.
    Moreover, $0<H^s(E)<\infty$.
\end{theorem}
\begin{proof}
    Write $A_\sigma=F_\sigma(A)$ for each $\sigma\in\Sigma^*=\{1,\ldots,m\}^*$.
    Fix $\delta>0$ and pick $k$ such that $r^k|E|<\delta$.
    Then the sets $\{E_\sigma:\sigma\in\Sigma^k\}$ is a $\delta$-cover of $E$.
    Then
    \begin{align*}
        H_\delta^s(E)&\leq\sum_{\sigma\in\Sigma^k}|E_\sigma|^s = \left(\sum_{\sigma\in\Sigma^k}r_\sigma^s\right)|E|^s\\
                     &= \left(\sum_{i=1}^m r_j^s\right)^k|E|^s=|E|^s
    \end{align*}
    so that $H^s(E)\leq|E|^s<\infty$.

    To get a lower bound, intending to use the mass distribution principle, we will construct a measure $\mu$ on $E$ such that $\mu(U)\leq c|U|^s$ for all open $E$.
    Define a measure $\mu$ on $E$ by the rule $\mu(E_\sigma)=r_\sigma^s$.
    Using the subdivision method, one may verify that this is in fact a measure.
    But then $E_\sigma=\bigcup_{j=1}^m E_{\sigma j}$, so
    \begin{align*}
        \sum_j\mu(E_{\sigma j})=\sum_j(r_{\sigma j})^s=r_\sigma^s\sum_j r_j^s=r_\sigma^s=\mu(E_\sigma).
    \end{align*}
    Now consider $B(x,r)$ where $x\in E$.
    Let $r<d=\min_{i\neq j}d(F_i(E),F_j(E))>0$, and get $k\in\N$ such that $r_\sigma\cdot d\leq r<r_{\sigma^-}d$ for $\sigma\in\Sigma^k$.
    Suppose $\sigma\neq\sigma'$ with $\sigma,\sigma'\in\Sigma^k$, and let $j$ be maximal such that $\sigma|j=\sigma'|j$.
    Then
    \begin{equation*}
        d(F_{\sigma|j}\circ F_{\sigma'_{j+1}}(E),F_{\sigma|j}\circ F_{\sigma_{j+1}}(E))=r_{\sigma|j}\cdot d\geq r_{\sigma|k-1}\cdot d>r
    \end{equation*}
    so that $d(E_{\sigma'},E_\sigma)>r$.
    If $y\in B(x,r)\cap E$, then $y\in E_\sigma$ so $B(x,r)\cap E\subseteq E_\sigma$.
    Thus $\mu(B(x,r)\cap E)\leq\mu(E_\sigma)=r_\sigma^s\leq\frac{r^s}{d^s}=c(\diam B(x,r))^s$.

    But given any $U$ such that $U\cap E\neq\emptyset$, we may take $U\subset B(x,|U|)$ for any choice of $x\in E\cap U$.
\end{proof}
\begin{theorem}
    Suppose $E$ is a compact, non-empty subset of $X$ and let $a,r_0>0$ .
    Suppose for all closed balls $B$ with centre in $E$ and radius $r<r_0$, there exists a contraction map $g:E\to E\cap B$ such that $d(g(x),g(y))\geq ar\cdot d(x,y)$ for all $x,y\in E$.
    Then if $s=\dim_HE$, then $H^s(E)\leq 4^sa^{-s}<\infty$ and $\underline{\dim}_B(E)=\overline{\dim}_B(E)=s$.
\end{theorem}
\begin{example}
    Let $E$ denote the Cantor set under the IFS $\{S_1,S_2\}$, and let $B$ be the Cantor interval $C_\sigma$.
    Then $\diam(B)=r_\sigma$, and $g:E\to E\cap B$ is the map $S_\sigma$.
    Then $d(g(x),g(y))=r_\sigma d(x,y)$.
\end{example}
\begin{proof}
    Let $N_r(E)$ denote the maximum number of disjoint closed balls of radius $r$ with centers in $E$.
    Assume for contradiction there exists $r<\min\{a^{-1},r_0\}$ with $N_r(E)>a^{-s}r^{-s}$.

    Get some $r>s$ such that $N_r(E)>a^{-t}r^{-t}$, so we may get $m$ disjoint closed balls $B_1,\ldots, B_m$ with centres in $E$ of radius $r$, and each of them gives rise to a map $g_i:E\to E\cap B_i$ such that $d(g_i(x),g_i(y))\geq ard(x,y)$ for all $x,y$ in $E$.
    Set $d_0=\min_{i\neq j}d(B_i\cap E,B_j\cap E)>0$.
    But then
    \begin{align*}
        d(g_{i_1}\circ\cdots\circ g_{i_k}(x),g_{j_1}\circ\cdots\circ g_{j_k}(y)) &\geq (ar)^{q-1} d(g_{i_q}\circ\cdots g_{i_k}(x),g_{j_q}\circ g_{j_k}(y))\\
                                                                                 &\geq (ar)^{q-1}d_0\geq(ar)^kd_0>0.
    \end{align*}
    On the other hand, $\diam E_\sigma\leq(\text{max contraction factor})^k|E|$ which converges to $0$ as $k$ goes to infinity.

    Intending to use the mass distribution principle, define a measure on $\mu$ by $\mu(E_{i_1\ldots i_k})=m^{-k}$ using the subdivision method.
    Take $U\cap E\neq\emptyset$ and $\diam U<d_0$.
    Pick $k$ such that $(ar)^{k+1}d_0\leq|U|<(ar)^kd_0$.
    Then
    \begin{align*}
        \mu(U)&\leq\mu(E_{i_1\ldots i_k})=m^{-k}\leq (ar)^{rk}\leq|U|^t\frac{(ar)^t}{d_0}
    \end{align*}
    and by the mass distribution principle, $\dim_H(E)\geq t>s$, a contradiction.

    Therefore $N-r(E)\leq a^{-s}r^{-s}$ for all small $r$.
    We may now compute
    \begin{align*}
        \overline{\dim}_BE = \limsup_{r\to 0}\frac{\log N_r(E)}{|\log r|}\leq\limsup_{r\to g\frac{\log a^{-s}r^{-s}}}{\log r^{-1}}=s
    \end{align*}
    so that $\overline{\dim}_BE\geq\underline{\dim}_BE\geq\dim_HE=s$.
    In particular, $\mathcal{H}^s_{2r}(E)$ is bounded above by the sum of the covering balls of radius $2r$, so $\mathcal{H}^s_{2r}(E)\leq 4^sa^{-s}$.
\end{proof}
\begin{corollary}
    Let $E$ be the attractor of similarities $\{F_i\}_{i=1}^m$. %with contraction factors $\{r_i\}_{i=1}^m$.
    If $s=\dim_H E$, then $\mathcal{H}^s(E)<\infty$ and $\dim_B E=s$.
\end{corollary}
\begin{proof}
    We need to produce continuous $g:E\to E\cap B$ for any ball $B$ with radius $r$ centred at $x\in E$.
    For $x\in E$ with $r<|E|$, there exists some infinite sequence $(i_1,i_2,\ldots)$ representing $x$.
    Choose $k$ so that $r_{i_1}\cdots r_{i_k}|E|\leq r<r_{i_1}\cdots r_{i_{k-1}}|E|$.
    In particular,
    \begin{equation*}
        r\cdot r_{\min}<r_{i_1}\cdots r_{i_k}|E|
    \end{equation*}
    so that $E_{i_1\ldots i_k}\subseteq B(x,r)$.
    Now define $g:E\to E\cap B(x,r)$ by $g=F_{i_1}\circ\cdots\circ F_{i_k}$ has image contained in $E\cap B(x,r)$, and
    \begin{equation*}
        d(g(x),g(y))=r_{i_1}\cdots r_{i_k}d(x,y)\geq r\cdot r_{\min}|E|^{-1}d(x,y).
    \end{equation*}
    Take $a=r_{\min}|E|^{-1}$ and apply the previous theorem.
\end{proof}
In fact, more is true in the strong separation case.
Given $0<r<|E|$, let $\Lambda_r=\{\sigma\in\Sigma^k:r_\sigma\leq r<r_{\sigma^-}\}$.
Given $x\in E$, let $\Lambda_r(x)=\{\sigma\in\Lambda_r:B(x,r)\cap F_\sigma(E)\neq\emptyset\}$.
Choose some $\sigma\in\Lambda_r(x)$ with maximal length.
Pick some index $i$ such that if $\lambda\in\Lambda_r(x)$, then $\lambda=(\sigma_1\ldots,\sigma_i,\lambda_{i+1},\ldots,\Lambda_N)$.
But then
\begin{align*}
    2r\geq d(F_\sigma(E),F_\lambda(E)) &= r_{\sigma_1}\cdots r_{\sigma_k}d(F_{\sigma_{i+1}}\circ\cdots\circ F_{\sigma_L}(E),F_{\lambda_{i+1}}\circ\cdots\circF_{\lambda_N})\\
                                       &\geq r_{\sigma_1}\cdots r_{\sigma_i}d_0
\end{align*}
so that $2r\geq r_{\sigma_1}\cdots r_{\sigma_i}d_0$.
But then combining the above inequalities, we have
\begin{align*}
    r_{\sigma_1}\cdots r_{\sigma_i}\cdot r_{\sigma_{i+1}}\cdots r_{\sigma_{L-1}} >r\geq r_{\sigma_1}\cdots r_{\sigma_i}\frac{d_0}{2}
\end{align*}
so there exists some $C$ such that $L-i\leq C$.
Thus $|\Lambda_r(x)|\leq m^C$ is a universal constant.
\begin{definition}
    We say that the IFS has the \defn{weak separation condition} if there exists $C$ suth that $|\Lambda_r(x)|\leq C$.
\end{definition}
\begin{corollary}
    If $E$ is a self-similar set from an IFS that has the WSC, then $\mathcal{H}^s(E)>0$ for $s=\dim_H(E)$.
\end{corollary}
\begin{proof}
    It is enough to check the setup of the assignment question.
    Let $N\subseteq E$ with $|N|=r$, $x\in E$.
    Then $B(x,r)\supseteq N$.
    Check that $E=\bigcup_{\sigma\in\Lambda_r}F_\sigma(E)$, so
    \begin{equation*}
        B(x,r)\cap E\subseteq\bigcup_{\sigma\in\Lambda_r(x)}F_\sigma(E)=\bigcup_{j=1}^m N_j.
    \end{equation*}
    Let $m=\max_{r,x}\Lambda_r(x)$.
    Let $g_j=F_\sigma^{-1}:F_\sigma(E)\to E$, so that
    \begin{align*}
        d(g_j(z),g_j(y))&=d(F_\sigma^{-1}(z),F_\sigma^{-1}(y))=r_\sigma^{-1}d(z,y)\\
                        &= r_\sigma^{-1}d(z,y)\geq r^{-1}d(z,y)\\
                        &= |N|^{-1}d(z,y)
    \end{align*}
    for all $z,y$ in $E$.
    By the homework, we have $\mathcal{H}^s(E)\geq m^{-1}>0$.
\end{proof}
\begin{proposition}
    If $E$ is the self-similar set from an IFS satisfying the weak separation condition, then there exists $a,b>0$ such that
    \begin{equation*}
        ar^s\leq\mathcal{H}^s(E\cap B(x,r))\leq br^s
    \end{equation*}
    for all $r<|E|$ and $x\in E$.
\end{proposition}
\begin{proof}
    Without loss of generality $|E|=1$.
    Fix $x,r$ and pick $\sigma\in\Lambda_r(x)$ such that $x\in F_\sigma(E)$ and $|F_\sigma(E)|\leq r_\sigma\leq r$.
    Thus $F_\sigma(E)\subseteq B(x,r)\cap E$.
    Thus
    \begin{equation*}
        \mathcal{H}^s(B(x,r)\cap E)\geq\mathcal{H}^s(F_\sigma(E))=r_\sigma^s\mathcal{H}^s(E)\geq r^s(r_{\min})^s\mathcal{H}^s(E)
    \end{equation*}
    so that $\mathcal{H}^s(B(x,r)\cap E)\leq\sum_{\sigma\in\Lambda_r(x)}r^s\mathcal{H}^s(E)\leq C\mathcal{H}^s(E)r^s$.
\end{proof}
\subsection{Assouad Dimensions}
In some sense, the upper and lower assouad dimensions are a measurement of the smallest and largest local dimension of a set $E$.
We define the \defn{upper assouad dimension}
\begin{equation*}
    \dim_A E = \inf\left\{\alpha:\exists C_1,C_2>0\text{ s.t. }\forall 0<r<R\leq C_1\sup_{x\in E}N_r(B(x,R)\cap E)\leq C_2\left(\frac{R}{r}\right)^\alpha\right\}
\end{equation*}
and the \defn{lower assouad dimension}
\begin{equation*}
    \dim_L E = \sup\left\{\alpha:\exists C_1,C_2>0\text{ s.t. }\forall 0<r<R\leq C_1\inf_{x\in E}N_r(B(x,R)\cap E)\geq C_2\left(\frac{R}{r}\right)^\alpha\right\}.
\end{equation*}
If $E\subseteq\R^n$ is bounded, then $\dim_A E\leq n$.
To see this, fix $x\in E$ and look at the $n$-dimensional cube $Y(x,R)$ centred at $x$ with sides of length $R$.
Then $N_r(Y(x,R)\cap E)\leq(2R/r)^n$.
Take $B(x,R)\subseteq Y(x,2R)$ so $N_r(B(x,R)\cap E)\leq 4^n(R/r)^n$.

$\R^n$ has a property called \defn{doubling}, which means there exists a constant $M$ such that $N_{R/2}(B(x,R))\leq M$.
In fact, $\dim_A E<\infty$ if and only if $E$ is doubling.

Get $M$ so that $E$ is doubling, and show that $\alpha$ such that $M^\alpha=2$ works.
The other direction is easier.
\begin{proposition}
    \begin{enumerate}[nl,r]
        \item $\dim_AE\geq\overline{\dim}_B E$.
        \item $\dim_L E\leq\underline{\dim}_B E$
    \end{enumerate}
\end{proposition}
\begin{proof}
    If $\dim_A E=\infty$ we are done.
    Thus assume $d=\dim_A E$.
    Fix $\epsilon>0$ and get $C_1,C_2$ such that $N_r(B(x,R))\leq C_2(R/r)^{d+\epsilon}$.
    Cover $E$ by finitely many balls of radius $C_1$ centred at points of $E$, say $B_1,\ldots,B_m$.
    Then
    \begin{equation*}
        N_r(E)\leq\sum_{j=1}^m N_r(B_j)\leq mC_2\left(\frac{C_1}{r}\right)^{d+\epsilon}
    \end{equation*}
    so that
    \begin{align*}
        \limsup_{r\to 0}\frac{\log N_r(E)}{|\log r|}\leq\limsup_{r\to 0}\frac{\log mC_2C_1^{d+\epsilon}-(\log r)(d+\epsilon)}{-\log r}=d+\epsilon
    \end{align*}
    and thus $\overline{\dim}_B E\leq d+\epsilon$ for any $\epsilon>0$.

    (ii) is an exercise.
\end{proof}
\begin{remark}
    It is also known that $\dim_L E\leq\dim_H E$, but this is more difficult to prove.
\end{remark}
If $E$ has an isolated point, then $\dim_L E=0$.
In fact,
\begin{proposition}
    $\dim_L E>0$ if and only if $E$ is \defn{uniformly perfect}, which means there exists $c>0$ such that $(B(z,R)\setminus B(z,cR))\cap E\neq\emptyset$ whenever $B(z,R)\cap E\neq\emptyset$.
\end{proposition}
\begin{example}
    Consider the Cantor set $C((r_j)_{j=1}^\infty)$.
    Recall that
    \begin{align*}
        \overline{\dim}_BC((r_j)_{j=1}^\infty)&=\limsup_{n\to\infty}\frac{\log 2}{\log(r_1\cdots r_n)^{1/n}}\\
        \dim_H C((r_j)_{j=1}^\infty)=\underline{\dim}_BC((r_j)_{j=1}^\infty)&=\liminf_{n\to\infty}\frac{\log 2}{\log(r_1\cdots r_n)^{1/n}}
    \end{align*}
    Moreover, one can show that
    \begin{align*}
        \dim_A C((r_j)_{j=1}^\infty)&=\limsup_{k\to\infty}\left(\sup_n\frac{\log 2}{\log(r_{n+1}\cdots r_{n+k})^{1/k}}\right)\\
        \dim_L C((r_j)_{j=1}^\infty)&=\liminf_{k\to\infty}\left(\inf_n\frac{\log 2}{\log(r_{n+1}\cdots r_{n+k})^{1/k}}\right)
    \end{align*}
    In fact, given any $0\leq A<B<C<D\leq 1$, it can be arranged so that $\dim_L(C)=A$, $\underline{\dim}_B=B$, $\overline{\dim}_B=C$, and $\dim_A(C)=D$.
\end{example}
\begin{theorem}
    If $E$ is a self-similar set satisfying the SSC, then $\dim_L E=\dim_A E$.
\end{theorem}
\begin{proof}
    We say previously that $E$ has the following property.
    Let $a,r_0>0$.
    Then for any $U$ such that $U\cap E\neq\emptyset$ and $|U|\leq r_0$, there exists a map $f:E\cap U\to E$ with $a|U|^{-1}d(x,y)\leq d(f(x),f(y)))$ for all $x,y\in E\cap U$.
    Similarly, for any closed ball $B$ with centre in $E$ and radius $r\leq r_0$, there exists a map $g:E\to E\cap B$ such that $ard(x,y)\leq d(g(x),g(y))$ for all $x,y\in E\cap B$.

    We know that for all $\epsilon>0$, there exists $C_\epsilon$ such that $\frac{1}{C_\epsilon}\leq N_r(E)\leq C_\epsilon r^{-s-\epsilon}$ for sufficiently small $r$.
    Fix $0<r<R$ and $x\in E$.
    Then consider $B(x,R)\cap E$. and get $f:B(x,R)\cap E\to E$ with $a|U|^{-1}d(x,y)\leq d(f(x),f(y))$.
    Consider $f(B(x,R)\cap E)$.
    Suppose $\{U_i\}$ are a $ar/(2R)$-cover.
    Then $\{f^{-1}(U_i)\}$ cover $B(x,R)\cap E$ and $\diam f^{-1}(U_i)$.
    Let $x,y\in f^{-1}(U_i)$, so that $f(x),f(y)\in U_i$ and $a|U|^{-1}(d(x,y))\leq\diam U_i$.
    Thus $d(x,y)\leq \frac{|U_i|}{a|U|^{-1}}\leq r$.

    Thus
    \begin{align*}
        N_r(B(x,R)\cap E)&\leq N_{ar/(2R)}(f(B(x,R)\cap E))\leq N_{ar/(2R)}(E)\\
                         &\leq C_\epsilon\left(\frac{ar}{2R}\right)^{-s-\epsilon}\\
                         &= C_\epsilon'\left(\frac{R}{r}\right)^{s+\epsilon}
    \end{align*}
    so that $\dim_A E\leq s+\epsilon$.
    But $\dim_A E\geq\overline{\dim}_B E=s$, so $\dim_A E=s$.
    For $\dim_L E=s$, use 2.
\end{proof}
\begin{example}
    Let $X=\{1/n:n\in\N\}\cup 0$.
    Then $\dim_L X=0$, $\dim_B X=1/2$, and $\dim_A X=1$.
\end{example}
If $E$ is a self-similar set in $\R$ that fails the WSC, then $\dim_A E=1$.
\end{document}
